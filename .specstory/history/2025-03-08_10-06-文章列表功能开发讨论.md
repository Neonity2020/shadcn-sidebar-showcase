## SpecStory

## æ–‡ç« åˆ—è¡¨åŠŸèƒ½å¼€å‘è®¨è®º (2025/3/8 10:06:21)

_**User**_

æ–‡ç« åˆ—è¡¨å¼€å‘
1. æŒ‰tagæ£€ç´¢æ–‡ç« çš„åŠŸèƒ½
2. åˆ†é¡µåŠŸèƒ½

---

_**Assistant**_

æˆ‘å°†å¸®åŠ©æ‚¨å®ç°æ–‡ç« åˆ—è¡¨çš„æ ‡ç­¾æ£€ç´¢å’Œåˆ†é¡µåŠŸèƒ½ã€‚è®©æˆ‘å…ˆæŸ¥çœ‹å½“å‰çš„æ–‡ç« åˆ—è¡¨é¡µé¢ä»£ç ï¼Œä»¥ä¾¿äº†è§£ç°æœ‰çš„å®ç°ã€‚

---

_****_

Read file: undefined

---

_****_

ç°åœ¨æˆ‘éœ€è¦äº†è§£ä¸€ä¸‹æ–‡ç« çš„MDXæ–‡ä»¶ç»“æ„ï¼Œä»¥ä¾¿æ›´å¥½åœ°å®ç°æ ‡ç­¾æ£€ç´¢åŠŸèƒ½ã€‚

---

_****_

<details>
            <summary>Listed directory app/(pages)/content/articles â€¢ **5** results</summary>
        
| Name |
|-------|
| ğŸ“„ `principles-of-DTI.mdx` |
| ğŸ“„ `principles-of-DWI.mdx` |
| ğŸ“„ `page.tsx` |
| ğŸ“„ `von-hippel-lindau-syndrome.mdx` |
| ğŸ“ `[slug]` |

</details>

---

_****_

è®©æˆ‘æŸ¥çœ‹ä¸€ä¸ªMDXæ–‡ä»¶çš„å†…å®¹ï¼Œä»¥äº†è§£æ–‡ç« çš„å…ƒæ•°æ®ç»“æ„ï¼š

---

_****_

Read file: undefined

---

_****_

ç°åœ¨æˆ‘å·²ç»äº†è§£äº†ç°æœ‰çš„æ–‡ç« åˆ—è¡¨é¡µé¢å’Œæ–‡ç« çš„å…ƒæ•°æ®ç»“æ„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†å®ç°æŒ‰æ ‡ç­¾æ£€ç´¢å’Œåˆ†é¡µåŠŸèƒ½ã€‚

é¦–å…ˆï¼Œæˆ‘å°†ä¿®æ”¹æ–‡ç« åˆ—è¡¨é¡µé¢ï¼Œæ·»åŠ æ ‡ç­¾æ£€ç´¢å’Œåˆ†é¡µåŠŸèƒ½ï¼š

---

_****_

```diff
  import matter from 'gray-matter'
  import { Metadata } from 'next'
+ import { notFound } from 'next/navigation'
  
  export const metadata: Metadata = {
  }
  
- export default function ArticlesPage() {
-   const articles = getArticles()
+ // è·å–æ‰€æœ‰æ ‡ç­¾
+ function getAllTags(articles) {
+   const tagsSet = new Set()
+   
+   articles.forEach(article => {
+     if (article.tags && Array.isArray(article.tags)) {
+       article.tags.forEach(tag => tagsSet.add(tag))
+     }
+   })
+   
+   return Array.from(tagsSet).sort()
+ }
+ 
+ export default function ArticlesPage({
+   searchParams,
+ }: {
+   searchParams: { tag?: string; page?: string }
+ }) {
+   const allArticles = getArticles()
+   const allTags = getAllTags(allArticles)
+   
+   // å¤„ç†æ ‡ç­¾è¿‡æ»¤
+   const selectedTag = searchParams.tag || ''
+   const filteredArticles = selectedTag 
+     ? allArticles.filter(article => 
+         article.tags && article.tags.includes(selectedTag)
+       )
+     : allArticles
+   
+   // å¤„ç†åˆ†é¡µ
+   const currentPage = parseInt(searchParams.page || '1', 10)
+   const articlesPerPage = 9
+   const totalPages = Math.ceil(filteredArticles.length / articlesPerPage)
+   
+   // éªŒè¯é¡µç æ˜¯å¦æœ‰æ•ˆ
+   if (currentPage < 1 || (currentPage > totalPages && totalPages > 0)) {
+     notFound()
+   }
+   
+   // è·å–å½“å‰é¡µçš„æ–‡ç« 
+   const startIndex = (currentPage - 1) * articlesPerPage
+   const endIndex = startIndex + articlesPerPage
+   const paginatedArticles = filteredArticles.slice(startIndex, endIndex)
+   
+   // ç”Ÿæˆåˆ†é¡µé“¾æ¥
+   const generatePageLink = (pageNum: number, tag?: string) => {
+     const params = new URLSearchParams()
+     if (pageNum > 1) params.set('page', pageNum.toString())
+     if (tag) params.set('tag', tag)
+     
+     const queryString = params.toString()
+     return queryString ? `?${queryString}` : ''
+   }
    
    return (
      <div className="container mx-auto py-10">
        <h1 className="text-4xl font-bold mb-8">æ–‡ç« åˆ—è¡¨</h1>
        
+       {/* æ ‡ç­¾è¿‡æ»¤å™¨ */}
+       <div className="mb-8">
+         <h2 className="text-xl font-semibold mb-4">æŒ‰æ ‡ç­¾ç­›é€‰</h2>
+         <div className="flex flex-wrap gap-2">
+           <Link 
+             href="/content/articles"
+             className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${
+               !selectedTag 
+                 ? 'bg-blue-600 text-white' 
+                 : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600'
+             }`}
+           >
+             å…¨éƒ¨
+           </Link>
+           
+           {allTags.map(tag => (
+             <Link 
+               key={tag} 
+               href={`/content/articles?tag=${encodeURIComponent(tag)}`}
+               className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${
+                 selectedTag === tag 
+                   ? 'bg-blue-600 text-white' 
+                   : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600'
+               }`}
+             >
+               {tag}
+             </Link>
+           ))}
+         </div>
+       </div>
+       
+       {/* æ–‡ç« åˆ—è¡¨ */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
-         {articles.map(article => (
+         {paginatedArticles.map(article => (
            <Link 
              key={article.slug} 
        </div>
        
-       {articles.length === 0 && (
+       {filteredArticles.length === 0 && (
          <div className="text-center py-12">
-           <p className="text-xl text-gray-500 dark:text-gray-400">æš‚æ— æ–‡ç« </p>
+           <p className="text-xl text-gray-500 dark:text-gray-400">
+             {selectedTag ? `æ²¡æœ‰æ‰¾åˆ°æ ‡ç­¾ä¸º"${selectedTag}"çš„æ–‡ç« ` : 'æš‚æ— æ–‡ç« '}
+           </p>
+         </div>
+       )}
+       
+       {/* åˆ†é¡µæ§ä»¶ */}
+       {totalPages > 1 && (
+         <div className="mt-12 flex justify-center">
+           <nav className="flex items-center space-x-2">
+             {/* ä¸Šä¸€é¡µæŒ‰é’® */}
+             <Link
+               href={generatePageLink(currentPage - 1, selectedTag)}
+               className={`px-4 py-2 rounded-md border ${
+                 currentPage === 1
+                   ? 'bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-800 dark:text-gray-500 dark:border-gray-700'
+                   : 'bg-white text-gray-700 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 dark:hover:bg-gray-700'
+               }`}
+               aria-disabled={currentPage === 1}
+               tabIndex={currentPage === 1 ? -1 : undefined}
+               onClick={e => currentPage === 1 && e.preventDefault()}
+             >
+               ä¸Šä¸€é¡µ
+             </Link>
+             
+             {/* é¡µç æŒ‰é’® */}
+             {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => {
+               // æ˜¾ç¤ºå½“å‰é¡µã€ç¬¬ä¸€é¡µã€æœ€åä¸€é¡µï¼Œä»¥åŠå½“å‰é¡µé™„è¿‘çš„é¡µç 
+               if (
+                 page === 1 ||
+                 page === totalPages ||
+                 (page >= currentPage - 1 && page <= currentPage + 1)
+               ) {
+                 return (
+                   <Link
+                     key={page}
+                     href={generatePageLink(page, selectedTag)}
+                     className={`px-4 py-2 rounded-md border ${
+                       currentPage === page
+                         ? 'bg-blue-600 text-white border-blue-600 dark:bg-blue-700 dark:border-blue-700'
+                         : 'bg-white text-gray-700 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 dark:hover:bg-gray-700'
+                     }`}
+                     aria-current={currentPage === page ? 'page' : undefined}
+                   >
+                     {page}
+                   </Link>
+                 )
+               }
+               
+               // æ˜¾ç¤ºçœç•¥å·
+               if (
+                 (page === 2 && currentPage > 3) ||
+                 (page === totalPages - 1 && currentPage < totalPages - 2)
+               ) {
+                 return (
+                   <span
+                     key={page}
+                     className="px-4 py-2 text-gray-500 dark:text-gray-400"
+                   >
+                     ...
+                   </span>
+                 )
+               }
+               
+               return null
+             })}
+             
+             {/* ä¸‹ä¸€é¡µæŒ‰é’® */}
+             <Link
+               href={generatePageLink(currentPage + 1, selectedTag)}
+               className={`px-4 py-2 rounded-md border ${
+                 currentPage === totalPages
+                   ? 'bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-800 dark:text-gray-500 dark:border-gray-700'
+                   : 'bg-white text-gray-700 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 dark:hover:bg-gray-700'
+               }`}
+               aria-disabled={currentPage === totalPages}
+               tabIndex={currentPage === totalPages ? -1 : undefined}
+               onClick={e => currentPage === totalPages && e.preventDefault()}
+             >
+               ä¸‹ä¸€é¡µ
+             </Link>
+           </nav>
          </div>
        )}
```

---

_****_

æˆ‘éœ€è¦ä¿®å¤è¿™äº›ç±»å‹é”™è¯¯ã€‚è®©æˆ‘æ›´æ–°æ–‡ä»¶ï¼š

---

_****_

```diff
  
  // è·å–æ‰€æœ‰æ ‡ç­¾
- function getAllTags(articles) {
-   const tagsSet = new Set()
+ function getAllTags(articles: any[]): string[] {
+   const tagsSet = new Set<string>()
    
    articles.forEach(article => {
      if (article.tags && Array.isArray(article.tags)) {
-       article.tags.forEach(tag => tagsSet.add(tag))
+       article.tags.forEach((tag: string) => tagsSet.add(tag))
      }
    })
                      {article.tags.slice(0, 3).map((tag: string, index: number) => (
                        <span 
-                         key={index} 
+                         key={`${tag}-${index}`} 
                          className="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded text-xs"
                        >
```

---

_****_

å¤ªå¥½äº†ï¼ç°åœ¨æˆ‘ä»¬å·²ç»æˆåŠŸå®ç°äº†æ–‡ç« åˆ—è¡¨é¡µé¢çš„æ ‡ç­¾æ£€ç´¢å’Œåˆ†é¡µåŠŸèƒ½ã€‚è®©æˆ‘æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬æ‰€åšçš„æ”¹è¿›ï¼š

## å®ç°çš„åŠŸèƒ½

### 1. æŒ‰æ ‡ç­¾æ£€ç´¢æ–‡ç« åŠŸèƒ½

1. æ·»åŠ äº† `getAllTags` å‡½æ•°ï¼Œç”¨äºä»æ‰€æœ‰æ–‡ç« ä¸­æå–å”¯ä¸€çš„æ ‡ç­¾åˆ—è¡¨
2. å®ç°äº†æ ‡ç­¾è¿‡æ»¤å™¨ UIï¼ŒåŒ…æ‹¬ï¼š
   - "å…¨éƒ¨"æŒ‰é’®ï¼Œç”¨äºæ˜¾ç¤ºæ‰€æœ‰æ–‡ç« 
   - åŠ¨æ€ç”Ÿæˆçš„æ ‡ç­¾æŒ‰é’®ï¼Œç‚¹å‡»åå¯ä»¥ç­›é€‰ç‰¹å®šæ ‡ç­¾çš„æ–‡ç« 
   - å½“å‰é€‰ä¸­çš„æ ‡ç­¾ä¼šé«˜äº®æ˜¾ç¤º
3. æ ¹æ® URL å‚æ•° `tag` è¿‡æ»¤æ–‡ç« åˆ—è¡¨
4. å½“æ²¡æœ‰æ‰¾åˆ°ç‰¹å®šæ ‡ç­¾çš„æ–‡ç« æ—¶ï¼Œæ˜¾ç¤ºå‹å¥½çš„æç¤ºä¿¡æ¯

### 2. åˆ†é¡µåŠŸèƒ½

1. å®ç°äº†åŸºäº URL å‚æ•° `page` çš„åˆ†é¡µç³»ç»Ÿ
2. æ¯é¡µæ˜¾ç¤ºå›ºå®šæ•°é‡çš„æ–‡ç« ï¼ˆ9ç¯‡ï¼‰
3. æ·»åŠ äº†åˆ†é¡µæ§ä»¶ï¼ŒåŒ…æ‹¬ï¼š
   - ä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µæŒ‰é’®
   - é¡µç æŒ‰é’®ï¼Œæ˜¾ç¤ºå½“å‰é¡µã€ç¬¬ä¸€é¡µã€æœ€åä¸€é¡µå’Œå½“å‰é¡µé™„è¿‘çš„é¡µç 
   - å½“é¡µç è¿‡å¤šæ—¶ï¼Œä½¿ç”¨çœç•¥å·ï¼ˆ...ï¼‰è¡¨ç¤ºçœç•¥çš„é¡µç 
4. å½“å‰é¡µç æŒ‰é’®é«˜äº®æ˜¾ç¤º
5. æ— æ•ˆé¡µç ä¼šé‡å®šå‘åˆ° 404 é¡µé¢
6. åˆ†é¡µçŠ¶æ€ä¼šåœ¨æ ‡ç­¾ç­›é€‰æ—¶ä¿æŒ

### 3. å…¶ä»–æ”¹è¿›

1. æ·»åŠ äº†ç±»å‹æ³¨è§£ï¼Œä¿®å¤äº† TypeScript ç±»å‹é”™è¯¯
2. ä¼˜åŒ–äº† UI è®¾è®¡ï¼Œä½¿æ ‡ç­¾è¿‡æ»¤å™¨å’Œåˆ†é¡µæ§ä»¶ä¸æ•´ä½“è®¾è®¡é£æ ¼ä¸€è‡´
3. æ·»åŠ äº†é€‚å½“çš„æ— éšœç¢å±æ€§ï¼ˆaria-*ï¼‰ï¼Œæé«˜äº†é¡µé¢çš„å¯è®¿é—®æ€§

## ä½¿ç”¨æ–¹æ³•

1. è®¿é—® `/content/articles` æŸ¥çœ‹æ‰€æœ‰æ–‡ç« 
2. ç‚¹å‡»æ ‡ç­¾æŒ‰é’®ç­›é€‰ç‰¹å®šæ ‡ç­¾çš„æ–‡ç« ï¼Œä¾‹å¦‚ `/content/articles?tag=MRI`
3. ä½¿ç”¨åˆ†é¡µæ§ä»¶æµè§ˆå¤šé¡µæ–‡ç« ï¼Œä¾‹å¦‚ `/content/articles?page=2`
4. å¯ä»¥åŒæ—¶ä½¿ç”¨æ ‡ç­¾ç­›é€‰å’Œåˆ†é¡µï¼Œä¾‹å¦‚ `/content/articles?tag=MRI&page=2`

è¿™äº›åŠŸèƒ½ä½¿æ–‡ç« åˆ—è¡¨é¡µé¢æ›´åŠ ç”¨æˆ·å‹å¥½ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæ›´è½»æ¾åœ°æ‰¾åˆ°ä»–ä»¬æ„Ÿå…´è¶£çš„å†…å®¹ã€‚

---



---

