## SpecStory

## NextJS React Basics Content Update (2025/3/11 08:30:21)

_**User**_

å°†å†…å®¹æ›¿æ¢ä¸ºé¢å‘NextJSçš„reactåŸºç¡€çŸ¥è¯†

---

_**Assistant**_

æˆ‘éœ€è¦æŸ¥çœ‹å½“å‰æ–‡ä»¶çš„å†…å®¹ï¼Œç„¶åå°†å…¶æ›¿æ¢ä¸ºé¢å‘NextJSçš„ReactåŸºç¡€çŸ¥è¯†ã€‚

---

_****_

Read file: undefined

---

_****_

ç°åœ¨æˆ‘å°†ç¼–è¾‘æ–‡ä»¶ï¼Œå°†å†…å®¹æ›¿æ¢ä¸ºé¢å‘NextJSçš„ReactåŸºç¡€çŸ¥è¯†ã€‚

---

_****_

```diff
  ---
- title: 'ä½¿ç”¨Next.jså’ŒTailwind CSSæ„å»ºç°ä»£åšå®¢'
- description: 'æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨Next.jså’ŒTailwind CSSæ„å»ºä¸€ä¸ªç°ä»£åŒ–çš„åšå®¢ç½‘ç«™ï¼ŒåŒ…æ‹¬å“åº”å¼è®¾è®¡ã€æ·±è‰²æ¨¡å¼æ”¯æŒå’ŒSEOä¼˜åŒ–ã€‚'
+ title: 'NextJSä¸­çš„ReactåŸºç¡€çŸ¥è¯†'
+ description: 'æœ¬æ–‡å°†ä»‹ç»åœ¨NextJSæ¡†æ¶ä¸­ä½¿ç”¨Reactçš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬ç»„ä»¶ã€çŠ¶æ€ç®¡ç†ã€é’©å­å‡½æ•°ä»¥åŠNextJSç‰¹æœ‰çš„åŠŸèƒ½ã€‚'
  date: '2023-10-15'
  lastmod: '2024-05-15'
- tags: ['Next.js', 'Tailwind CSS', 'åšå®¢', 'Next.js 15']
+ tags: ['Next.js', 'React', 'å‰ç«¯å¼€å‘', 'JavaScript']
  draft: false
  category: 'Webå¼€å‘'
  authors: ['default']
  ---
- ## NextJSç°ä»£å»ºç«™æŒ‡å—
+ 
+ ## NextJSä¸­çš„ReactåŸºç¡€çŸ¥è¯†
  
  ## å¼•è¨€
  
- åœ¨å½“ä»Šå¿«é€Ÿå‘å±•çš„ç½‘ç»œä¸–ç•Œä¸­ï¼Œæ„å»ºé«˜æ€§èƒ½ã€ç”¨æˆ·å‹å¥½ä¸”SEOå‹å¥½çš„ç½‘ç«™å˜å¾—å°¤ä¸ºé‡è¦ã€‚Next.jsä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„Reactæ¡†æ¶ï¼Œæ­£åœ¨å½»åº•æ”¹å˜ç°ä»£ç½‘ç«™çš„å¼€å‘æ–¹å¼ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åˆ©ç”¨Next.jsæ„å»ºç°ä»£åŒ–ç½‘ç«™ï¼Œä»¥åŠå®ƒä¸ºä½•æˆä¸ºä¼—å¤šå¼€å‘è€…å’Œä¼ä¸šçš„é¦–é€‰æ¡†æ¶ã€‚éšç€Next.js 15çš„å‘å¸ƒï¼Œè¿™ä¸ªæ¡†æ¶å˜å¾—æ›´åŠ å¼ºå¤§å’Œé«˜æ•ˆã€‚
+ Reactæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„JavaScriptåº“ï¼Œè€ŒNext.jsåˆ™æ˜¯åŸºäºReactçš„å¼ºå¤§æ¡†æ¶ï¼Œå®ƒæ‰©å±•äº†Reactçš„åŠŸèƒ½å¹¶æä¾›äº†é¢å¤–çš„ç‰¹æ€§ã€‚åœ¨ä½¿ç”¨Next.jsä¹‹å‰ï¼ŒæŒæ¡Reactçš„åŸºç¡€çŸ¥è¯†è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†ä»‹ç»åœ¨Next.jsç¯å¢ƒä¸­ä½¿ç”¨Reactçš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µã€‚
  
- ## Next.jsçš„æ ¸å¿ƒä¼˜åŠ¿
- 
- Next.jsæ˜¯ç”±Vercelå¼€å‘çš„Reactæ¡†æ¶ï¼Œå®ƒæä¾›äº†è®¸å¤šé©å‘½æ€§çš„åŠŸèƒ½ï¼š
- 
- - **æ··åˆæ¸²æŸ“ç­–ç•¥**ï¼šæ”¯æŒSSRï¼ˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼‰ã€SSGï¼ˆé™æ€ç«™ç‚¹ç”Ÿæˆï¼‰å’ŒISRï¼ˆå¢é‡é™æ€å†ç”Ÿæˆï¼‰
- - **App Router**ï¼šåŸºäºReact Server Componentsçš„æ–°ä¸€ä»£è·¯ç”±ç³»ç»Ÿ
- - **è‡ªåŠ¨ä»£ç åˆ†å‰²**ï¼šåªåŠ è½½å½“å‰é¡µé¢æ‰€éœ€çš„JavaScript
- - **å†…ç½®å›¾åƒå’Œå­—ä½“ä¼˜åŒ–**ï¼šæä¾›å“è¶Šçš„Core Web Vitalsæ€§èƒ½
- - **é›¶é…ç½®æ”¯æŒTypeScript**ï¼šå¢å¼ºä»£ç è´¨é‡å’Œå¼€å‘ä½“éªŒ
- - **å¿«é€Ÿåˆ·æ–°**ï¼šå³æ—¶åé¦ˆçš„å¼€å‘ä½“éªŒ
- - **å†…ç½®APIè·¯ç”±**ï¼šè½»æ¾åˆ›å»ºåç«¯APIç«¯ç‚¹
- 
- ## Next.js 15çš„æ–°ç‰¹æ€§
- 
- Next.js 15äº2024å¹´å‘å¸ƒï¼Œå¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°ç‰¹æ€§å’Œæ”¹è¿›ï¼š
- 
- ### æ€§èƒ½æå‡
- 
- - **æ›´å¿«çš„æ„å»ºé€Ÿåº¦**ï¼šæ„å»ºæ—¶é—´æ¯”ä¹‹å‰ç‰ˆæœ¬å‡å°‘äº†40%
- - **æ›´å°çš„å®¢æˆ·ç«¯åŒ…ä½“ç§¯**ï¼šé€šè¿‡æ”¹è¿›çš„æ ‘æ‘‡åŠ¨å’Œä»£ç åˆ†å‰²ä¼˜åŒ–
- - **æ”¹è¿›çš„æœåŠ¡å™¨ç»„ä»¶æµå¼ä¼ è¾“**ï¼šæ›´å¿«çš„é¦–æ¬¡å†…å®¹ç»˜åˆ¶(FCP)å’Œäº¤äº’æ—¶é—´(TTI)
- 
- ### å¼€å‘ä½“éªŒå¢å¼º
- 
- - **Turbopackæ”¹è¿›**ï¼šå¼€å‘æœåŠ¡å™¨å¯åŠ¨æ—¶é—´å‡å°‘50%ï¼Œçƒ­æ¨¡å—æ›¿æ¢(HMR)é€Ÿåº¦æå‡
- - **å¢å¼ºçš„ç±»å‹æ£€æŸ¥**ï¼šæ›´å¥½çš„TypeScripté›†æˆå’Œé”™è¯¯æç¤º
- - **æ”¹è¿›çš„è°ƒè¯•å·¥å…·**ï¼šå†…ç½®React DevToolsé›†æˆ
- 
- ### æ–°çš„APIå’ŒåŠŸèƒ½
- 
- - **éƒ¨åˆ†é¢„æ¸²æŸ“(Partial Prerendering)**ï¼šç»“åˆé™æ€å’ŒåŠ¨æ€å†…å®¹çš„é©å‘½æ€§æ¸²æŸ“ç­–ç•¥
- - **æœåŠ¡å™¨æ“ä½œ(Server Actions)ç¨³å®šç‰ˆ**ï¼šç®€åŒ–è¡¨å•å¤„ç†å’Œæ•°æ®å˜æ›´
- - **ä¸­é—´ä»¶å¢å¼º**ï¼šæ›´å¼ºå¤§çš„è¯·æ±‚å’Œå“åº”å¤„ç†èƒ½åŠ›
- - **æ”¹è¿›çš„å›½é™…åŒ–æ”¯æŒ**ï¼šç®€åŒ–å¤šè¯­è¨€ç½‘ç«™çš„æ„å»º
- 
- ### æ›´å¥½çš„SEOå’ŒWeb Vitals
- 
- - **è‡ªåŠ¨å…ƒæ•°æ®ä¼˜åŒ–**ï¼šç®€åŒ–SEOè®¾ç½®
- - **æ”¹è¿›çš„å›¾åƒç»„ä»¶**ï¼šæ›´å¥½çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ
- - **Core Web Vitalsä¼˜åŒ–**ï¼šè‡ªåŠ¨ä¼˜åŒ–å…³é”®æŒ‡æ ‡
- 
- ## ä»é›¶å¼€å§‹æ„å»ºNext.jsé¡¹ç›®
- 
- ### é¡¹ç›®åˆå§‹åŒ–
- 
- åˆ›å»ºä¸€ä¸ªæ–°çš„Next.js 15é¡¹ç›®éå¸¸ç®€å•ï¼š
+ ## Reactç»„ä»¶åŸºç¡€
+ 
+ ### å‡½æ•°ç»„ä»¶
+ 
+ åœ¨Next.jsä¸­ï¼Œå‡½æ•°ç»„ä»¶æ˜¯æœ€å¸¸ç”¨çš„ç»„ä»¶ç±»å‹ï¼š
+ 
+ ```jsx
+ // app/components/Greeting.jsx
+ export default function Greeting({ name }) {
+   return <h1>ä½ å¥½ï¼Œ{name}ï¼</h1>;
+ }
+ ```
+ 
+ ### ä½¿ç”¨ç»„ä»¶
+ 
+ åœ¨Next.jsé¡µé¢ä¸­ä½¿ç”¨ç»„ä»¶ï¼š
+ 
+ ```jsx
+ // app/page.jsx
+ import Greeting from '../components/Greeting';
+ 
+ export default function HomePage() {
+   return (
+     <div>
+       <Greeting name="è®¿å®¢" />
+     </div>
+   );
+ }
+ ```
+ 
+ ## ReactçŠ¶æ€ç®¡ç†
+ 
+ ### useStateé’©å­
+ 
+ åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­ç®¡ç†çŠ¶æ€ï¼š
  
- ```bash
- npx create-next-app@latest my-modern-site
- cd my-modern-site
- npm run dev
- ```
- 
- åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©ï¼š
- - ä½¿ç”¨TypeScript
- - ä½¿ç”¨ESLint
- - ä½¿ç”¨Tailwind CSS
- - ä½¿ç”¨App Routeræˆ–Pages Router
- - è‡ªå®šä¹‰å¯¼å…¥åˆ«å
- 
- ### ç†è§£App Routeræ¶æ„
- 
- Next.jsçš„App Routeræ˜¯ä¸€ä¸ªåŸºäºReact Server Componentsçš„é©å‘½æ€§è·¯ç”±ç³»ç»Ÿï¼š
- 
- ```
- app/
- â”œâ”€â”€ layout.tsx      # æ ¹å¸ƒå±€ï¼ˆå¿…éœ€ï¼‰
- â”œâ”€â”€ page.tsx        # é¦–é¡µ
- â”œâ”€â”€ about/
- â”‚   â””â”€â”€ page.tsx    # /aboutè·¯ç”±
- â”œâ”€â”€ blog/
- â”‚   â”œâ”€â”€ layout.tsx  # åšå®¢å¸ƒå±€
- â”‚   â”œâ”€â”€ page.tsx    # /blogè·¯ç”±
- â”‚   â””â”€â”€ [slug]/     # åŠ¨æ€è·¯ç”±
- â”‚       â””â”€â”€ page.tsx # /blog/:slugè·¯ç”±
- â””â”€â”€ api/            # APIè·¯ç”±
-     â””â”€â”€ route.ts    # APIç«¯ç‚¹
- ```
- 
- ### æ•°æ®è·å–ç­–ç•¥
- 
- Next.jsæä¾›äº†å¤šç§æ•°æ®è·å–æ–¹æ³•ï¼š
- 
- ```typescript
- // æœåŠ¡å™¨ç»„ä»¶ä¸­è·å–æ•°æ®
- async function BlogPage() {
-   // è¿™åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œä¸ä¼šå‘é€åˆ°å®¢æˆ·ç«¯
-   const posts = await fetchPosts();
+ ```jsx
+ 'use client'; // æ ‡è®°ä¸ºå®¢æˆ·ç«¯ç»„ä»¶
+ 
+ import { useState } from 'react';
+ 
+ export default function Counter() {
+   const [count, setCount] = useState(0);
+   
+   return (
+     <div>
+       <p>å½“å‰è®¡æ•°: {count}</p>
+       <button onClick={() => setCount(count + 1)}>å¢åŠ </button>
+     </div>
+   );
+ }
+ ```
+ 
+ ### useEffecté’©å­
+ 
+ å¤„ç†å‰¯ä½œç”¨ï¼š
+ 
+ ```jsx
+ 'use client';
+ 
+ import { useState, useEffect } from 'react';
+ 
+ export default function UserProfile({ userId }) {
+   const [user, setUser] = useState(null);
+   const [loading, setLoading] = useState(true);
+   
+   useEffect(() => {
+     async function fetchUser() {
+       setLoading(true);
+       try {
+         const response = await fetch(`/api/users/${userId}`);
+         const data = await response.json();
+         setUser(data);
+       } catch (error) {
+         console.error('è·å–ç”¨æˆ·æ•°æ®å¤±è´¥', error);
+       } finally {
+         setLoading(false);
+       }
+     }
+     
+     fetchUser();
+   }, [userId]); // ä¾èµ–é¡¹æ•°ç»„
+   
+   if (loading) return <p>åŠ è½½ä¸­...</p>;
+   if (!user) return <p>æœªæ‰¾åˆ°ç”¨æˆ·</p>;
    
    return (
      <div>
-       {posts.map(post => (
-         <article key={post.id}>{post.title}</article>
-       ))}
+       <h1>{user.name}</h1>
+       <p>{user.email}</p>
      </div>
    );
  }
  ```
  
- ### éƒ¨åˆ†é¢„æ¸²æŸ“(Next.js 15æ–°åŠŸèƒ½)
+ ## Next.jsä¸­çš„Reactç‰¹æ€§
+ 
+ ### æœåŠ¡å™¨ç»„ä»¶ä¸å®¢æˆ·ç«¯ç»„ä»¶
  
- Next.js 15å¼•å…¥çš„éƒ¨åˆ†é¢„æ¸²æŸ“å…è®¸åœ¨åŒä¸€é¡µé¢ä¸­æ··åˆé™æ€å’ŒåŠ¨æ€å†…å®¹ï¼š
+ Next.jså¼•å…¥äº†React Server Componentsï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯æœåŠ¡å™¨ç»„ä»¶ï¼š
  
- ```typescript
- import { Suspense } from 'react';
- import { unstable_noStore as noStore } from 'next/cache';
+ ```jsx
+ // æœåŠ¡å™¨ç»„ä»¶ï¼ˆé»˜è®¤ï¼‰
+ export default async function ServerComponent() {
+   const data = await fetchDataOnServer();
+   
+   return <div>{data.map(item => <p key={item.id}>{item.name}</p>)}</div>;
+ }
+ ```
+ 
+ éœ€è¦ä½¿ç”¨æµè§ˆå™¨APIæˆ–ReactçŠ¶æ€çš„ç»„ä»¶å¿…é¡»æ ‡è®°ä¸ºå®¢æˆ·ç«¯ç»„ä»¶ï¼š
+ 
+ ```jsx
+ 'use client'; // å¿…é¡»æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨
+ 
+ import { useState } from 'react';
+ 
+ export default function ClientComponent() {
+   const [isOpen, setIsOpen] = useState(false);
+   
+   return (
+     <button onClick={() => setIsOpen(!isOpen)}>
+       {isOpen ? 'å…³é—­' : 'æ‰“å¼€'}
+     </button>
+   );
+ }
+ ```
+ 
+ ### ç»„ä»¶ä¹‹é—´çš„äº¤äº’
+ 
+ æœåŠ¡å™¨ç»„ä»¶å¯ä»¥å¯¼å…¥å’Œæ¸²æŸ“å®¢æˆ·ç«¯ç»„ä»¶ï¼Œä½†å®¢æˆ·ç«¯ç»„ä»¶ä¸èƒ½å¯¼å…¥æœåŠ¡å™¨ç»„ä»¶ï¼š
+ 
+ ```jsx
+ // ServerWrapper.jsx (æœåŠ¡å™¨ç»„ä»¶)
+ import ClientCounter from './ClientCounter';
  
- // é™æ€éƒ¨åˆ†
- function StaticContent() {
-   return <h1>è¿™éƒ¨åˆ†åœ¨æ„å»ºæ—¶ç”Ÿæˆ</h1>;
+ export default function ServerWrapper() {
+   return (
+     <div>
+       <h1>è¿™æ˜¯æœåŠ¡å™¨æ¸²æŸ“çš„</h1>
+       <ClientCounter /> {/* å¯ä»¥åœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­ä½¿ç”¨å®¢æˆ·ç«¯ç»„ä»¶ */}
+     </div>
+   );
  }
- 
- // åŠ¨æ€éƒ¨åˆ†
- async function DynamicContent() {
-   noStore(); // æ ‡è®°ä¸ºåŠ¨æ€å†…å®¹
-   const data = await fetchLatestData();
-   return <div>{data.content}</div>;
+ ```
+ 
+ ## React Propså’Œæ•°æ®ä¼ é€’
+ 
+ ### PropsåŸºç¡€
+ 
+ ```jsx
+ // Button.jsx
+ export default function Button({ text, onClick, color = 'blue' }) {
+   return (
+     <button 
+       onClick={onClick}
+       style={{ backgroundColor: color }}
+     >
+       {text}
+     </button>
+   );
+ }
+ ```
+ 
+ ### ä½¿ç”¨childrenå±æ€§
+ 
+ ```jsx
+ // Card.jsx
+ export default function Card({ children, title }) {
+   return (
+     <div className="card">
+       <h2>{title}</h2>
+       <div className="card-content">
+         {children}
+       </div>
+     </div>
+   );
  }
  
- export default function Page() {
+ // ä½¿ç”¨Cardç»„ä»¶
+ function HomePage() {
    return (
-     <>
-       <StaticContent />
-       <Suspense fallback={<p>åŠ è½½ä¸­...</p>}>
-         <DynamicContent />
-       </Suspense>
-     </>
+     <Card title="æ¬¢è¿">
+       <p>è¿™æ˜¯å¡ç‰‡å†…å®¹</p>
+       <button>ç‚¹å‡»æˆ‘</button>
+     </Card>
    );
  }
  ```
  
- ## æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯
- 
- ### å›¾åƒä¼˜åŒ–
- 
- Next.jsçš„Imageç»„ä»¶è‡ªåŠ¨ä¼˜åŒ–å›¾åƒï¼Œæä¾›WebPå’ŒAVIFæ ¼å¼ï¼Œå¹¶å®ç°å»¶è¿ŸåŠ è½½ï¼š
- 
- ```typescript
- import Image from 'next/image';
- 
- function Hero() {
+ ## Reactæ¡ä»¶æ¸²æŸ“
+ 
+ ```jsx
+ function ConditionalComponent({ isLoggedIn, username }) {
+   return (
+     <div>
+       {isLoggedIn ? (
+         <h1>æ¬¢è¿å›æ¥ï¼Œ{username}ï¼</h1>
+       ) : (
+         <h1>è¯·ç™»å½•</h1>
+       )}
+       
+       {/* ä½¿ç”¨é€»è¾‘ä¸è¿ç®—ç¬¦ */}
+       {isLoggedIn && <button>é€€å‡ºç™»å½•</button>}
+     </div>
+   );
+ }
+ ```
+ 
+ ## Reactåˆ—è¡¨æ¸²æŸ“
+ 
+ ```jsx
+ function ProductList({ products }) {
    return (
-     <Image
-       src="/hero.jpg"
-       alt="ç½‘ç«™æ¨ªå¹…"
-       width={1200}
-       height={600}
-       priority
-     />
+     <ul>
+       {products.map((product) => (
+         <li key={product.id}>
+           <h3>{product.name}</h3>
+           <p>Â¥{product.price}</p>
+         </li>
+       ))}
+     </ul>
    );
  }
  ```
  
- ### å­—ä½“ä¼˜åŒ–
- 
- Next.jsæä¾›äº†`next/font`æ¨¡å—ï¼Œè‡ªåŠ¨ä¼˜åŒ–å­—ä½“å¹¶æ¶ˆé™¤å¸ƒå±€åç§»ï¼š
- 
- ```typescript
- import { Inter } from 'next/font/google';
- 
- const inter = Inter({ subsets: ['latin'] });
- 
- export default function RootLayout({ children }) {
+ ## Reactè¡¨å•å¤„ç†
+ 
+ ### å—æ§ç»„ä»¶
+ 
+ ```jsx
+ 'use client';
+ 
+ import { useState } from 'react';
+ 
+ export default function LoginForm() {
+   const [formData, setFormData] = useState({
+     username: '',
+     password: ''
+   });
+   
+   const handleChange = (e) => {
+     const { name, value } = e.target;
+     setFormData(prev => ({
+       ...prev,
+       [name]: value
+     }));
+   };
+   
+   const handleSubmit = (e) => {
+     e.preventDefault();
+     console.log('è¡¨å•æ•°æ®:', formData);
+     // å¤„ç†ç™»å½•é€»è¾‘
+   };
+   
    return (
-     <html lang="zh-CN" className={inter.className}>
-       <body>{children}</body>
-     </html>
+     <form onSubmit={handleSubmit}>
+       <div>
+         <label htmlFor="username">ç”¨æˆ·å:</label>
+         <input
+           type="text"
+           id="username"
+           name="username"
+           value={formData.username}
+           onChange={handleChange}
+           required
+         />
+       </div>
+       <div>
+         <label htmlFor="password">å¯†ç :</label>
+         <input
+           type="password"
+           id="password"
+           name="password"
+           value={formData.password}
+           onChange={handleChange}
+           required
+         />
+       </div>
+       <button type="submit">ç™»å½•</button>
+     </form>
    );
  }
  ```
  
- ### æœåŠ¡å™¨æ“ä½œ(Server Actions)
- 
- Next.js 15ä¸­ç¨³å®šç‰ˆçš„æœåŠ¡å™¨æ“ä½œç®€åŒ–äº†è¡¨å•å¤„ç†ï¼š
+ ### Next.jsä¸­çš„è¡¨å•å¤„ç†ï¼ˆServer Actionsï¼‰
  
- ```typescript
- // app/contact/page.tsx
- export default function ContactPage() {
-   async function submitForm(formData: FormData) {
+ ```jsx
+ // app/contact/page.jsx
+ export default function ContactForm() {
+   async function handleSubmit(formData) {
      'use server';
      
      const message = formData.get('message');
      
-     // å¤„ç†è¡¨å•æ•°æ®ï¼Œä¾‹å¦‚å‘é€ç”µå­é‚®ä»¶æˆ–ä¿å­˜åˆ°æ•°æ®åº“
-     await saveToDatabase({ name, email, message });
-     
-     // å¯ä»¥é‡å®šå‘æˆ–è¿”å›å€¼
-     redirect('/thank-you');
+     // æœåŠ¡å™¨ç«¯å¤„ç†é€»è¾‘
+     await saveContactMessage({ name, email, message });
    }
    
    return (
-     <form action={submitForm}>
+     <form action={handleSubmit}>
        <input name="name" placeholder="å§“å" required />
-       <input name="email" type="email" placeholder="ç”µå­é‚®ä»¶" required />
+       <input name="email" type="email" placeholder="é‚®ç®±" required />
        <textarea name="message" placeholder="ç•™è¨€" required></textarea>
        <button type="submit">æäº¤</button>
  ```
  
- ## éƒ¨ç½²ä¸æ‰˜ç®¡é€‰é¡¹
- 
- Next.jsåº”ç”¨å¯ä»¥éƒ¨ç½²åˆ°å¤šç§å¹³å°ï¼š
- 
- - **Vercel**ï¼šNext.jsçš„åˆ›å»ºè€…æä¾›çš„å¹³å°ï¼Œæä¾›æœ€ä½³é›†æˆä½“éªŒ
- - **Netlify**ï¼šæä¾›ç±»ä¼¼çš„æ— æœåŠ¡å™¨éƒ¨ç½²ä½“éªŒ
- - **AWS Amplify**ï¼šä¸AWSæœåŠ¡æ·±åº¦é›†æˆ
- - **è‡ªæ‰˜ç®¡**ï¼šå¯éƒ¨ç½²åˆ°ä»»ä½•æ”¯æŒNode.jsçš„æœåŠ¡å™¨
- 
- ## å®é™…æ¡ˆä¾‹ï¼šæ„å»ºé«˜æ€§èƒ½ç”µå­å•†åŠ¡ç½‘ç«™
- 
- ä½¿ç”¨Next.jsæ„å»ºç”µå­å•†åŠ¡ç½‘ç«™æ—¶ï¼Œå¯ä»¥åˆ©ç”¨ï¼š
- 
- - é™æ€ç”Ÿæˆäº§å“ç›®å½•é¡µé¢æé«˜æ€§èƒ½
- - ä½¿ç”¨ISRä¿æŒäº§å“ä¿¡æ¯æœ€æ–°
- - åˆ©ç”¨APIè·¯ç”±å¤„ç†ç»“è´¦æµç¨‹
- - ä½¿ç”¨ä¸­é—´ä»¶å®ç°èº«ä»½éªŒè¯å’Œåœ°åŒºå®šå‘
- - ä½¿ç”¨éƒ¨åˆ†é¢„æ¸²æŸ“æ··åˆé™æ€äº§å“ä¿¡æ¯å’ŒåŠ¨æ€åº“å­˜/ä»·æ ¼æ•°æ®
- 
- ## ç»“è®º
- 
- Next.jsæ­£åœ¨é‡æ–°å®šä¹‰ç°ä»£ç½‘ç«™å»ºè®¾çš„æ ‡å‡†ã€‚éšç€Next.js 15çš„å‘å¸ƒï¼Œå®ƒä¸ä»…æä¾›äº†å“è¶Šçš„å¼€å‘ä½“éªŒï¼Œè¿˜ç¡®ä¿äº†æœ€ç»ˆç”¨æˆ·è·å¾—å¿«é€Ÿã€å¯é å’Œå¼•äººå…¥èƒœçš„ä½“éªŒã€‚æ— è®ºæ˜¯æ„å»ºä¸ªäººåšå®¢ã€ä¼ä¸šç½‘ç«™è¿˜æ˜¯å¤æ‚çš„Webåº”ç”¨ï¼ŒNext.jséƒ½æä¾›äº†æ‰€éœ€çš„å·¥å…·å’ŒåŠŸèƒ½ï¼Œä½¿å¼€å‘è¿‡ç¨‹æ›´åŠ é«˜æ•ˆå’Œæ„‰å¿«ã€‚
- 
- éšç€Webæ ‡å‡†çš„ä¸æ–­å‘å±•ï¼ŒNext.jsä¹Ÿåœ¨æŒç»­åˆ›æ–°ï¼Œç¡®ä¿å¼€å‘è€…èƒ½å¤Ÿæ„å»ºé¢å‘æœªæ¥çš„åº”ç”¨ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å°è¯•Next.jsï¼Œç°åœ¨æ­£æ˜¯å¼€å§‹çš„æœ€ä½³æ—¶æœºã€‚
+ ## Reactå¸¸ç”¨é’©å­
+ 
+ ### useContext
+ 
+ åˆ›å»ºå’Œä½¿ç”¨ä¸Šä¸‹æ–‡ï¼š
+ 
+ ```jsx
+ 'use client';
+ 
+ import { createContext, useContext, useState } from 'react';
+ 
+ // åˆ›å»ºä¸Šä¸‹æ–‡
+ const ThemeContext = createContext(null);
+ 
+ // æä¾›è€…ç»„ä»¶
+ export function ThemeProvider({ children }) {
+   const [theme, setTheme] = useState('light');
+   
+   const toggleTheme = () => {
+     setTheme(prev => prev === 'light' ? 'dark' : 'light');
+   };
+   
+   return (
+     <ThemeContext.Provider value={{ theme, toggleTheme }}>
+       {children}
+     </ThemeContext.Provider>
+   );
+ }
+ 
+ // ä½¿ç”¨ä¸Šä¸‹æ–‡çš„ç»„ä»¶
+ export function ThemedButton() {
+   const { theme, toggleTheme } = useContext(ThemeContext);
+   
+   return (
+     <button 
+       onClick={toggleTheme}
+       style={{ 
+         backgroundColor: theme === 'light' ? '#fff' : '#333',
+         color: theme === 'light' ? '#333' : '#fff'
+       }}
+     >
+       åˆ‡æ¢åˆ°{theme === 'light' ? 'æ·±è‰²' : 'æµ…è‰²'}æ¨¡å¼
+     </button>
+   );
+ }
+ ```
+ 
+ ### useReducer
+ 
+ å¤„ç†å¤æ‚çŠ¶æ€é€»è¾‘ï¼š
+ 
+ ```jsx
+ 'use client';
+ 
+ import { useReducer } from 'react';
+ 
+ // å®šä¹‰åˆå§‹çŠ¶æ€
+ const initialState = { count: 0 };
+ 
+ // å®šä¹‰reducerå‡½æ•°
+ function reducer(state, action) {
+   switch (action.type) {
+     case 'increment':
+       return { count: state.count + 1 };
+     case 'decrement':
+       return { count: state.count - 1 };
+     case 'reset':
+       return { count: 0 };
+     default:
+       throw new Error('æœªçŸ¥æ“ä½œ');
+   }
+ }
+ 
+ export default function Counter() {
+   const [state, dispatch] = useReducer(reducer, initialState);
+   
+   return (
+     <div>
+       <p>è®¡æ•°: {state.count}</p>
+       <button onClick={() => dispatch({ type: 'increment' })}>+</button>
+       <button onClick={() => dispatch({ type: 'decrement' })}>-</button>
+       <button onClick={() => dispatch({ type: 'reset' })}>é‡ç½®</button>
+     </div>
+   );
+ }
+ ```
+ 
+ ### useMemoå’ŒuseCallback
+ 
+ ä¼˜åŒ–æ€§èƒ½ï¼š
+ 
+ ```jsx
+ 'use client';
+ 
+ import { useState, useMemo, useCallback } from 'react';
+ 
+ export default function ExpensiveCalculation({ list }) {
+   const [count, setCount] = useState(0);
+   
+   // ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ
+   const expensiveResult = useMemo(() => {
+     console.log('æ‰§è¡Œæ˜‚è´µè®¡ç®—...');
+     return list.reduce((total, item) => total + item, 0);
+   }, [list]); // åªæœ‰å½“listå˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—
+   
+   // ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•°
+   const handleClick = useCallback(() => {
+     setCount(c => c + 1);
+   }, []); // ç©ºä¾èµ–æ•°ç»„æ„å‘³ç€å‡½æ•°æ°¸è¿œä¸ä¼šé‡æ–°åˆ›å»º
+   
+   return (
+     <div>
+       <p>è®¡æ•°: {count}</p>
+       <p>è®¡ç®—ç»“æœ: {expensiveResult}</p>
+       <button onClick={handleClick}>å¢åŠ è®¡æ•°</button>
+     </div>
+   );
+ }
+ ```
+ 
+ ## Next.jsä¸­çš„æ•°æ®è·å–
+ 
+ ### åœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­è·å–æ•°æ®
+ 
+ ```jsx
+ // app/users/page.jsx
+ export default async function UsersPage() {
+   // è¿™åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œä¸ä¼šå‘é€åˆ°å®¢æˆ·ç«¯
+   const users = await fetch('https://api.example.com/users').then(res => res.json());
+   
+   return (
+     <div>
+       <h1>ç”¨æˆ·åˆ—è¡¨</h1>
+       <ul>
+         {users.map(user => (
+           <li key={user.id}>{user.name}</li>
+         ))}
+       </ul>
+     </div>
+   );
+ }
+ ```
+ 
+ ### åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­è·å–æ•°æ®
+ 
+ ```jsx
+ 'use client';
+ 
+ import { useState, useEffect } from 'react';
+ 
+ export default function ClientFetch() {
+   const [data, setData] = useState(null);
+   const [loading, setLoading] = useState(true);
+   
+   useEffect(() => {
+     async function fetchData() {
+       try {
+         const response = await fetch('/api/data');
+         const result = await response.json();
+         setData(result);
+       } catch (error) {
+         console.error('è·å–æ•°æ®å¤±è´¥', error);
+       } finally {
+         setLoading(false);
+       }
+     }
+     
+     fetchData();
+   }, []);
+   
+   if (loading) return <p>åŠ è½½ä¸­...</p>;
+   if (!data) return <p>æ— æ•°æ®</p>;
+   
+   return (
+     <div>
+       <h1>å®¢æˆ·ç«¯è·å–çš„æ•°æ®</h1>
+       <pre>{JSON.stringify(data, null, 2)}</pre>
+     </div>
+   );
+ }
+ ```
+ 
+ ## ç»“è®º
+ 
+ æŒæ¡ReactåŸºç¡€çŸ¥è¯†å¯¹äºæœ‰æ•ˆä½¿ç”¨Next.jsè‡³å…³é‡è¦ã€‚é€šè¿‡ç†è§£ç»„ä»¶ã€çŠ¶æ€ç®¡ç†ã€é’©å­å‡½æ•°ä»¥åŠNext.jsç‰¹æœ‰çš„åŠŸèƒ½ï¼ˆå¦‚æœåŠ¡å™¨ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶çš„åŒºåˆ«ï¼‰ï¼Œä½ å¯ä»¥å……åˆ†åˆ©ç”¨Next.jsæ¡†æ¶çš„å¼ºå¤§åŠŸèƒ½æ¥æ„å»ºé«˜æ€§èƒ½ã€ç”¨æˆ·å‹å¥½çš„Webåº”ç”¨ã€‚
+ 
+ éšç€ä½ å¯¹ReactåŸºç¡€çš„æ·±å…¥ç†è§£ï¼Œä½ å°†èƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨Next.jsæä¾›çš„é«˜çº§åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨ä»£ç åˆ†å‰²ã€æœåŠ¡å™¨ç«¯æ¸²æŸ“ã€é™æ€ç«™ç‚¹ç”Ÿæˆç­‰ï¼Œä»è€Œåˆ›å»ºå‡ºæ›´åŠ å‡ºè‰²çš„Webä½“éªŒã€‚
```

---

_****_

æˆ‘å·²ç»æˆåŠŸå°†æ–‡ä»¶å†…å®¹æ›¿æ¢ä¸ºé¢å‘NextJSçš„ReactåŸºç¡€çŸ¥è¯†ã€‚æ–°çš„å†…å®¹åŒ…æ‹¬ï¼š

1. æ›´æ–°äº†æ ‡é¢˜å’Œæè¿°ï¼Œä½¿å…¶æ›´ç¬¦åˆReactåŸºç¡€çŸ¥è¯†çš„ä¸»é¢˜
2. æ›´æ–°äº†æ ‡ç­¾ï¼Œæ·»åŠ äº†"React"å’Œ"å‰ç«¯å¼€å‘"ç­‰ç›¸å…³æ ‡ç­¾
3. æ·»åŠ äº†ä»¥ä¸‹ReactåŸºç¡€çŸ¥è¯†å†…å®¹ï¼š
   - Reactç»„ä»¶åŸºç¡€ï¼ˆå‡½æ•°ç»„ä»¶å’Œç»„ä»¶ä½¿ç”¨ï¼‰
   - ReactçŠ¶æ€ç®¡ç†ï¼ˆuseStateå’ŒuseEffecté’©å­ï¼‰
   - Next.jsä¸­çš„Reactç‰¹æ€§ï¼ˆæœåŠ¡å™¨ç»„ä»¶ä¸å®¢æˆ·ç«¯ç»„ä»¶ï¼‰
   - React Propså’Œæ•°æ®ä¼ é€’
   - Reactæ¡ä»¶æ¸²æŸ“å’Œåˆ—è¡¨æ¸²æŸ“
   - Reactè¡¨å•å¤„ç†ï¼ˆåŒ…æ‹¬Next.jsä¸­çš„Server Actionsï¼‰
   - Reactå¸¸ç”¨é’©å­ï¼ˆuseContext, useReducer, useMemoå’ŒuseCallbackï¼‰
   - Next.jsä¸­çš„æ•°æ®è·å–ï¼ˆæœåŠ¡å™¨ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶ä¸­ï¼‰

æ–°å†…å®¹ä¿ç•™äº†åŸå§‹çš„frontmatterç»“æ„ï¼Œä½†æ›´æ–°äº†ç›¸å…³å…ƒæ•°æ®ä»¥åæ˜ æ–°çš„ä¸»é¢˜å†…å®¹ã€‚æ‰€æœ‰ä»£ç ç¤ºä¾‹éƒ½ä½¿ç”¨äº†JSXè¯­æ³•ï¼Œå¹¶æ·»åŠ äº†è¯¦ç»†çš„æ³¨é‡Šå’Œè§£é‡Šï¼Œä»¥å¸®åŠ©è¯»è€…ç†è§£Reactåœ¨Next.jsç¯å¢ƒä¸­çš„åŸºç¡€çŸ¥è¯†å’Œæœ€ä½³å®è·µã€‚

---

_**User**_

å¯¹mdxä¸­çš„ä»£ç å—å®ç°è‰²å½©æ¸²æŸ“

---

_**Assistant**_

æˆ‘éœ€è¦äº†è§£å¦‚ä½•åœ¨ MDX æ–‡ä»¶ä¸­å®ç°ä»£ç å—çš„è‰²å½©æ¸²æŸ“ã€‚

---

_****_

<details>
            <summary>Listed current directory â€¢ **25** results</summary>
        
| Name |
|-------|
| ğŸ“ `.next` |
| ğŸ“„ `package-lock.json` |
| ğŸ“„ `package.json` |
| ğŸ“ `node_modules` |
| ğŸ“ `.git` |
| ğŸ“ `prisma` |
| ğŸ“„ `.env` |
| ğŸ“„ `middleware.ts` |
| ğŸ“„ `next-env.d.ts` |
| ğŸ“ `scripts` |
| ğŸ“ `styles` |
| ğŸ“„ `tailwind.config.ts` |
| ğŸ“„ `tsconfig.json` |
| ğŸ“ `types` |
| ğŸ“ `public` |
| ğŸ“„ `postcss.config.mjs` |
| ğŸ“ `data` |
| ğŸ“ `hooks` |
| ğŸ“ `lib` |
| ğŸ“„ `next.config.mjs` |
| ğŸ“ `components` |
| ğŸ“ `app` |
| ğŸ“„ `components.json` |
| ğŸ“„ `.gitignore` |
| ğŸ“ `.specstory` |

</details>

---

_****_

è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹ MDX ç›¸å…³çš„é…ç½®å’Œç»„ä»¶ï¼Œé¦–å…ˆæŸ¥çœ‹ next.config.mjs æ–‡ä»¶ï¼Œå› ä¸ºå®ƒå¯èƒ½åŒ…å« MDX çš„é…ç½®ï¼š

---

_****_

Read file: undefined

---

_****_

ç°åœ¨æˆ‘éœ€è¦æŸ¥çœ‹ MDX ç›¸å…³çš„ç»„ä»¶æˆ–é…ç½®ï¼Œç‰¹åˆ«æ˜¯ä¸ä»£ç é«˜äº®ç›¸å…³çš„éƒ¨åˆ†ï¼š

---

_****_

<details>
            <summary>Searched codebase "MDX code highlighting syntax highlighting" â€¢ **24** results</summary>
        
| File | Lines |
|------|-------|
| `.specstory/history/2025-03-08_10-38-æ ·å¼ä¼˜åŒ–å»ºè®®.md` | L561-588 |
| `.specstory/history/2025-03-04_21-33-fixing-mdx-code-styling-issues.md` | L1-105 |
| `app/(pages)/content/page.tsx` | L1-30 |
| `components/mdx-component.tsx` | L168-214 |
| `.specstory/history/2025-03-02_15-20-æ­£ç¡®æ¸²æŸ“mdxæ–‡ä»¶çš„è®¨è®º.md` | L259-360 |
| `.specstory/history/2025-03-08_09-30-mdxæ–‡ä»¶æ‚¬æµ®ç›®å½•åŠŸèƒ½å¼€å‘.md` | L527-565 |
| `app/(pages)/content/mdx-example/page.tsx` | L1-22 |
| `app/(pages)/content/mdx-example.mdx` | L1-13 |
| `.specstory/history/2025-03-02_15-20-æ­£ç¡®æ¸²æŸ“mdxæ–‡ä»¶çš„è®¨è®º.md` | L150-259 |
| `.specstory/history/2025-03-08_09-30-mdxæ–‡ä»¶æ‚¬æµ®ç›®å½•åŠŸèƒ½å¼€å‘.md` | L565-639 |
| `.specstory/history/2025-03-02_15-15-untitled.md` | L1-255 |
| `.specstory/history/2025-03-08_10-38-æ ·å¼ä¼˜åŒ–å»ºè®®.md` | L750-780 |
| `.specstory/history/2025-03-02_15-20-æ­£ç¡®æ¸²æŸ“mdxæ–‡ä»¶çš„è®¨è®º.md` | L1-150 |
| `app/(pages)/mri-bookshelf/page.tsx` | L254-276 |
| `.specstory/history/2025-03-04_21-05-convert-article-to-mdx-format.md` | L217-399 |
| `.specstory/history/2025-03-08_10-38-æ ·å¼ä¼˜åŒ–å»ºè®®.md` | L446-482 |
| `tailwind.config.ts` | L1-64 |
| `.specstory/history/2025-03-06_07-52-ç”Ÿæˆå¿…è¦çš„metaä¿¡æ¯.md` | L134-253 |
| `components/mdx-component.tsx` | L214-222 |
| `.specstory/history/2025-03-07_12-14-ä¸ºmdxæ–‡ä»¶æ·»åŠ ç›®å½•åŠŸèƒ½.md` | L39-92 |
| `.specstory/history/2025-03-04_21-05-convert-article-to-mdx-format.md` | L1-217 |
| `app/(pages)/content/page.tsx` | L30-42 |
| `.specstory/history/2025-03-08_09-30-mdxæ–‡ä»¶æ‚¬æµ®ç›®å½•åŠŸèƒ½å¼€å‘.md` | L639-907 |
| `.specstory/history/2025-03-03_18-18-ä¹¦ç±ç›®å½•æŠ˜å åˆ—è¡¨å®ç°.md` | L817-881 |

</details>

---

_****_

è®©æˆ‘æŸ¥çœ‹ä¸€ä¸‹é¡¹ç›®ä¸­æ˜¯å¦æœ‰ä½¿ç”¨ä»£ç é«˜äº®çš„åº“ï¼š

---

_****_

<details>
            <summary>Grep search for "rehype|prism|shiki|highlight|syntax" â€¢ **5** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///Users/andi/Documents/GitHub/my-mri-lib/scripts/db-utils.ts` | Lundefined | `import { PrismaClient } from '@prisma/client'` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/scripts/db-utils.ts` | L4 | `const prisma = new PrismaClient()` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/scripts/db-utils.ts` | L17 | `const users = await prisma.user.findMany({` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/scripts/db-utils.ts` | L40 | `await prisma.$disconnect()` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/scripts/db-utils.ts` | L50 | `await prisma.$connect()` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/scripts/db-utils.ts` | L53 | `const userCount = await prisma.user.count()` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/scripts/db-utils.ts` | L69 | `await prisma.$disconnect()` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L9 | `"db:migrate": "prisma migrate dev",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L10 | `"db:deploy": "prisma migrate deploy",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L11 | `"db:reset": "prisma migrate reset",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L12 | `"db:push": "prisma db push",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L13 | `"db:studio": "prisma studio",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L14 | `"db:generate": "prisma generate",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L15 | `"db:seed": "ts-node --compiler-options {\"module\":\"CommonJS\"} prisma/seed.ts",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L16 | `"db:backup": "mkdir -p backups && cp prisma/dev.db backups/dev-$(date +%Y%m%d%H%M%S).db",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L26 | `"@prisma/client": "^6.4.1",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L54 | `"@shikijs/rehype": "^3.1.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L70 | `"prisma": "^6.4.1",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L78 | `"rehype-prism-plus": "^2.0.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L79 | `"rehype-slug": "^6.0.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L101 | `"prisma": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package.json` | L102 | `"seed": "ts-node --compiler-options {\"module\":\"CommonJS\"} prisma/seed.ts"` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/data/books.ts` | L18 | `highlights?: {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/data/books.ts` | L69 | `highlights: [` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/data/books.ts` | L141 | `highlights: [` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/data/books.ts` | L196 | `highlights: [` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/data/books.ts` | L257 | `highlights: [` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/data/books.ts` | L297 | `highlights: [` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/data/books.ts` | L344 | `highlights: [` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/data/books.ts` | L391 | `highlights: [` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/data/books.ts` | L434 | `highlights: [` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/data/books.ts` | L482 | `highlights: [` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/lib/prisma.ts` | Lundefined | `import { PrismaClient } from "@prisma/client"` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/lib/prisma.ts` | L2 | `const globalForPrisma = global as unknown as { prisma: PrismaClient }` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/lib/prisma.ts` | L4 | `export const prisma =` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/lib/prisma.ts` | L5 | `globalForPrisma.prisma ||` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/lib/prisma.ts` | L6 | `new PrismaClient({` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/lib/prisma.ts` | L10 | `if (process.env.NODE_ENV !== "production") globalForPrisma.prisma = prisma` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L15 | `"@prisma/client": "^6.4.1",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L43 | `"@shikijs/rehype": "^3.1.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L59 | `"prisma": "^6.4.1",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L67 | `"rehype-prism-plus": "^2.0.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L68 | `"rehype-slug": "^6.0.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1213 | `"rehype-recma": "^1.0.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1216 | `"remark-rehype": "^11.0.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1459 | `"node_modules/@prisma/client": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1461 | `"resolved": "https://registry.npmmirror.com/@prisma/client/-/client-6.4.1.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1469 | `"prisma": "*",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1473 | `"prisma": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1481 | `"node_modules/@prisma/debug": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1483 | `"resolved": "https://registry.npmmirror.com/@prisma/debug/-/debug-6.4.1.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1487 | `"node_modules/@prisma/engines": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1489 | `"resolved": "https://registry.npmmirror.com/@prisma/engines/-/engines-6.4.1.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1494 | `"@prisma/debug": "6.4.1",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1495 | `"@prisma/engines-version": "6.4.0-29.a9055b89e58b4b5bfb59600785423b1db3d0e75d",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1496 | `"@prisma/fetch-engine": "6.4.1",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1497 | `"@prisma/get-platform": "6.4.1"` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1500 | `"node_modules/@prisma/engines-version": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1502 | `"resolved": "https://registry.npmmirror.com/@prisma/engines-version/-/engines-version-6.4.0-29.a9055b89e58b4b5bfb59600785423b1db3d0e75d.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1506 | `"node_modules/@prisma/fetch-engine": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1508 | `"resolved": "https://registry.npmmirror.com/@prisma/fetch-engine/-/fetch-engine-6.4.1.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1512 | `"@prisma/debug": "6.4.1",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1513 | `"@prisma/engines-version": "6.4.0-29.a9055b89e58b4b5bfb59600785423b1db3d0e75d",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1514 | `"@prisma/get-platform": "6.4.1"` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1517 | `"node_modules/@prisma/get-platform": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1519 | `"resolved": "https://registry.npmmirror.com/@prisma/get-platform/-/get-platform-6.4.1.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L1523 | `"@prisma/debug": "6.4.1"` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2842 | `"node_modules/@shikijs/core": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2844 | `"resolved": "https://registry.npmmirror.com/@shikijs/core/-/core-3.1.0.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2848 | `"@shikijs/types": "3.1.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2849 | `"@shikijs/vscode-textmate": "^10.0.2",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2854 | `"node_modules/@shikijs/engine-javascript": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2856 | `"resolved": "https://registry.npmmirror.com/@shikijs/engine-javascript/-/engine-javascript-3.1.0.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2860 | `"@shikijs/types": "3.1.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2861 | `"@shikijs/vscode-textmate": "^10.0.2",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2865 | `"node_modules/@shikijs/engine-oniguruma": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2867 | `"resolved": "https://registry.npmmirror.com/@shikijs/engine-oniguruma/-/engine-oniguruma-3.1.0.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2871 | `"@shikijs/types": "3.1.0",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2872 | `"@shikijs/vscode-textmate": "^10.0.2"` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2875 | `"node_modules/@shikijs/langs": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2877 | `"resolved": "https://registry.npmmirror.com/@shikijs/langs/-/langs-3.1.0.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2881 | `"@shikijs/types": "3.1.0"` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2884 | `"node_modules/@shikijs/rehype": {` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2886 | `"resolved": "https://registry.npmmirror.com/@shikijs/rehype/-/rehype-3.1.0.tgz",` |
| `file:///Users/andi/Documents/GitHub/my-mri-lib/package-lock.json` | L2890 | `"@shikijs/types": "3.1.0",` |

</details>

---

_****_

è®©æˆ‘æŸ¥çœ‹ä¸€ä¸‹ next.config.mjs æ–‡ä»¶ï¼Œçœ‹çœ‹æ˜¯å¦å·²ç»é…ç½®äº† MDX çš„ä»£ç é«˜äº®ï¼š

---

_****_

Read file: undefined

---

_****_

ç°åœ¨æˆ‘éœ€è¦æŸ¥çœ‹ mdx-component.tsx æ–‡ä»¶ï¼Œäº†è§£å½“å‰çš„ MDX ç»„ä»¶é…ç½®ï¼š

---

_****_

<details>
            <summary>Searched codebase "mdx-component" â€¢ **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---

_****_

Read file: undefined

---

_****_

ç°åœ¨æˆ‘éœ€è¦æŸ¥çœ‹ package.json æ–‡ä»¶ï¼Œç¡®è®¤å·²å®‰è£…çš„ä»£ç é«˜äº®ç›¸å…³çš„åŒ…ï¼š

---

_****_

Read file: undefined

---

_****_

åŸºäºæˆ‘çš„è°ƒæŸ¥ï¼Œæˆ‘å‘ç°é¡¹ç›®å·²ç»å®‰è£…äº†ä»¥ä¸‹ä»£ç é«˜äº®ç›¸å…³çš„åŒ…ï¼š
1. `@shikijs/rehype` - Shiki çš„ rehype æ’ä»¶ï¼Œç”¨äºä»£ç é«˜äº®
2. `rehype-prism-plus` - åŸºäº Prism.js çš„ä»£ç é«˜äº®æ’ä»¶
3. `rehype-slug` - ä¸ºæ ‡é¢˜æ·»åŠ  ID çš„æ’ä»¶

ç°åœ¨æˆ‘éœ€è¦ä¿®æ”¹ next.config.mjs å’Œ mdx-component.tsx æ–‡ä»¶ï¼Œä»¥å®ç° MDX ä»£ç å—çš„è‰²å½©æ¸²æŸ“ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä¿®æ”¹ next.config.mjs æ–‡ä»¶ï¼š

---

_****_

```diff
  import createMDX from '@next/mdx'
+ import { rehypeShiki } from '@shikijs/rehype'
+ import rehypeSlug from 'rehype-slug'
   
  /** @type {import('next').NextConfig} */
   
  const withMDX = createMDX({
-   // Add markdown plugins here, as desired
+   // æ·»åŠ  rehype æ’ä»¶è¿›è¡Œä»£ç é«˜äº®
+   options: {
+     rehypePlugins: [
+       rehypeSlug,
+       [rehypeShiki, { 
+         theme: 'github-dark',
+         langs: ['javascript', 'typescript', 'jsx', 'tsx', 'css', 'html', 'json', 'bash', 'markdown', 'python', 'java']
+       }]
+     ],
+   },
  })
   
```

---

_****_

ç°åœ¨ï¼Œè®©æˆ‘ä¿®æ”¹ mdx-component.tsx æ–‡ä»¶ï¼Œæ›´æ–°ä»£ç å—çš„æ ·å¼ï¼š

---

_****_

```diff
      </div>
    ),
-   pre: (props: any) => (
-     <pre className="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto" {...props} />
-   ),
-   code: (props: any) => (
-     <code className="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-sm" {...props} />
-   ),
+   pre: (props: any) => {
+     // æå–è¯­è¨€ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰
+     const className = props.children?.props?.className || '';
+     const language = className.replace(/language-/, '');
+     
+     return (
+       <div className="relative group my-6">
+         {language && (
+           <div className="absolute right-4 top-3 text-xs font-mono text-gray-400 dark:text-gray-500">
+             {language}
+           </div>
+         )}
+         <pre 
+           className="bg-gray-900 dark:bg-gray-950 text-gray-100 p-4 rounded-lg overflow-x-auto border border-gray-800 shadow-md" 
+           {...props} 
+         />
+         <div className="absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity">
+           <button
+             onClick={() => {
+               const code = props.children?.props?.children || '';
+               navigator.clipboard.writeText(code);
+               // å¯ä»¥æ·»åŠ å¤åˆ¶æˆåŠŸçš„æç¤º
+             }}
+             className="p-1.5 rounded-md bg-gray-700 hover:bg-gray-600 text-gray-300"
+             aria-label="å¤åˆ¶ä»£ç "
+             title="å¤åˆ¶ä»£ç "
+           >
+             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
+               <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
+               <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
+             </svg>
+           </button>
+         </div>
+       </div>
+     );
+   },
+   code: (props: any) => {
+     // æ£€æŸ¥æ˜¯å¦åœ¨ pre æ ‡ç­¾å†…
+     const isInPre = React.useContext(React.createContext(false));
+     
+     if (isInPre) {
+       // å¦‚æœåœ¨ pre æ ‡ç­¾å†…ï¼Œä¸æ·»åŠ é¢å¤–æ ·å¼
+       return <code {...props} />;
+     }
+     
+     // è¡Œå†…ä»£ç æ ·å¼
+     return (
+       <code 
+         className="bg-gray-100 dark:bg-gray-800 text-rose-500 dark:text-rose-400 px-1.5 py-0.5 rounded text-sm font-mono" 
+         {...props} 
+       />
+     );
+   },
    table: (props: any) => (
      <div className="overflow-x-auto">
```

---

_****_

ç°åœ¨ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…¨å±€æ ·å¼æ–‡ä»¶ï¼Œæ·»åŠ ä»£ç é«˜äº®çš„æ ·å¼ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦æŸ¥çœ‹é¡¹ç›®ä¸­çš„å…¨å±€æ ·å¼æ–‡ä»¶ï¼š

---

_****_

<details>
            <summary>Searched codebase "globals.css" â€¢ **2** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |

</details>

---

_****_

Read file: undefined

---

_****_

ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨å…¨å±€æ ·å¼æ–‡ä»¶ä¸­æ·»åŠ ä»£ç é«˜äº®çš„æ ·å¼ï¼š

---

_****_

```diff
    }
  }
+ 
+ /* ä»£ç é«˜äº®ç›¸å…³æ ·å¼ */
+ .prose pre {
+   position: relative;
+   background-color: rgb(24, 24, 27);
+   color: rgb(244, 244, 245);
+   padding: 1rem;
+   border-radius: 0.5rem;
+   overflow-x: auto;
+   border: 1px solid rgb(39, 39, 42);
+   margin: 1.5rem 0;
+ }
+ 
+ .prose pre code {
+   background-color: transparent;
+   padding: 0;
+   border-radius: 0;
+   color: inherit;
+   font-size: 0.875rem;
+   line-height: 1.7;
+   font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
+ }
+ 
+ /* è¡Œå†…ä»£ç æ ·å¼ */
+ .prose :not(pre) > code {
+   background-color: rgb(243, 244, 246);
+   color: rgb(220, 38, 38);
+   padding: 0.2rem 0.4rem;
+   border-radius: 0.25rem;
+   font-size: 0.875rem;
+   font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
+ }
+ 
+ .dark .prose :not(pre) > code {
+   background-color: rgb(31, 41, 55);
+   color: rgb(248, 113, 113);
+ }
+ 
+ /* ä»£ç å—è¯­è¨€æ ‡ç­¾ */
+ .prose pre[data-language]::before {
+   content: attr(data-language);
+   position: absolute;
+   top: 0.5rem;
+   right: 1rem;
+   font-size: 0.75rem;
+   color: rgb(156, 163, 175);
+   text-transform: uppercase;
+ }
+ 
+ /* ä»£ç å—å¤åˆ¶æŒ‰é’® */
+ .prose pre .copy-button {
+   position: absolute;
+   top: 0.5rem;
+   right: 0.5rem;
+   padding: 0.25rem;
+   background-color: rgb(55, 65, 81);
+   border-radius: 0.25rem;
+   opacity: 0;
+   transition: opacity 0.2s;
+ }
+ 
+ .prose pre:hover .copy-button {
+   opacity: 1;
+ }
+ 
+ /* ä»£ç è¡Œé«˜äº® */
+ .prose pre .highlighted-line {
+   background-color: rgba(55, 65, 81, 0.5);
+   display: block;
+   margin: 0 -1rem;
+   padding: 0 1rem;
+ }
  
```

---

_****_

æœ€åï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæµ‹è¯• MDX æ–‡ä»¶ï¼Œä»¥éªŒè¯ä»£ç é«˜äº®åŠŸèƒ½ï¼š

---

_****_

```diff
  å¤„ç†å‰¯ä½œç”¨ï¼š
  
- ```jsx
+ ```typescript
  'use client';
  
  import { useState, useEffect } from 'react';
  
- export default function UserProfile({ userId }) {
-   const [user, setUser] = useState(null);
+ export default function UserProfile({ userId }: { userId: string }) {
+   const [user, setUser] = useState<User | null>(null);
    const [loading, setLoading] = useState(true);
    
    );
  }
+ 
+ interface User {
+   id: string;
+   name: string;
+   email: string;
+ }
  ```
  
  Next.jså¼•å…¥äº†React Server Componentsï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯æœåŠ¡å™¨ç»„ä»¶ï¼š
  
- ```jsx
+ ```tsx
  // æœåŠ¡å™¨ç»„ä»¶ï¼ˆé»˜è®¤ï¼‰
  export default async function ServerComponent() {
  éœ€è¦ä½¿ç”¨æµè§ˆå™¨APIæˆ–ReactçŠ¶æ€çš„ç»„ä»¶å¿…é¡»æ ‡è®°ä¸ºå®¢æˆ·ç«¯ç»„ä»¶ï¼š
  
- ```jsx
+ ```tsx
  'use client'; // å¿…é¡»æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨
  
  æœåŠ¡å™¨ç»„ä»¶å¯ä»¥å¯¼å…¥å’Œæ¸²æŸ“å®¢æˆ·ç«¯ç»„ä»¶ï¼Œä½†å®¢æˆ·ç«¯ç»„ä»¶ä¸èƒ½å¯¼å…¥æœåŠ¡å™¨ç»„ä»¶ï¼š
  
- ```jsx
- // ServerWrapper.jsx (æœåŠ¡å™¨ç»„ä»¶)
+ ```tsx
+ // ServerWrapper.tsx (æœåŠ¡å™¨ç»„ä»¶)
  import ClientCounter from './ClientCounter';
  
  ### PropsåŸºç¡€
  
- ```jsx
- // Button.jsx
- export default function Button({ text, onClick, color = 'blue' }) {
+ ```tsx
+ // Button.tsx
+ interface ButtonProps {
+   text: string;
+   onClick: () => void;
+   color?: string;
+ }
+ 
+ export default function Button({ text, onClick, color = 'blue' }: ButtonProps) {
    return (
      <button 
  ### ä½¿ç”¨childrenå±æ€§
  
- ```jsx
- // Card.jsx
- export default function Card({ children, title }) {
+ ```tsx
+ // Card.tsx
+ import { ReactNode } from 'react';
+ 
+ interface CardProps {
+   children: ReactNode;
+   title: string;
+ }
+ 
+ export default function Card({ children, title }: CardProps) {
    return (
      <div className="card">
  ## Reactåˆ—è¡¨æ¸²æŸ“
  
- ```jsx
- function ProductList({ products }) {
+ ```tsx
+ interface Product {
+   id: number;
+   name: string;
+   price: number;
+ }
+ 
+ function ProductList({ products }: { products: Product[] }) {
    return (
      <ul>
  ### å—æ§ç»„ä»¶
  
- ```jsx
+ ```tsx
  'use client';
  
- import { useState } from 'react';
+ import { useState, ChangeEvent, FormEvent } from 'react';
+ 
+ interface FormData {
+   username: string;
+   password: string;
+ }
  
  export default function LoginForm() {
-   const [formData, setFormData] = useState({
+   const [formData, setFormData] = useState<FormData>({
      username: '',
      password: ''
    });
    
-   const handleChange = (e) => {
+   const handleChange = (e: ChangeEvent<HTMLInputElement>) => {
      const { name, value } = e.target;
      setFormData(prev => ({
    };
    
-   const handleSubmit = (e) => {
+   const handleSubmit = (e: FormEvent<HTMLFormElement>) => {
      e.preventDefault();
      console.log('è¡¨å•æ•°æ®:', formData);
  ### Next.jsä¸­çš„è¡¨å•å¤„ç†ï¼ˆServer Actionsï¼‰
  
- ```jsx
- // app/contact/page.jsx
+ ```tsx
+ // app/contact/page.tsx
+ import { redirect } from 'next/navigation';
+ 
  export default function ContactForm() {
-   async function handleSubmit(formData) {
+   async function handleSubmit(formData: FormData) {
      'use server';
      
-     const name = formData.get('name');
-     const email = formData.get('email');
-     const message = formData.get('message');
+     const name = formData.get('name') as string;
+     const email = formData.get('email') as string;
+     const message = formData.get('message') as string;
      
      // æœåŠ¡å™¨ç«¯å¤„ç†é€»è¾‘
      await saveContactMessage({ name, email, message });
+     
+     // é‡å®šå‘åˆ°æ„Ÿè°¢é¡µé¢
+     redirect('/thank-you');
    }
    
    );
  }
+ 
+ // æ¨¡æ‹Ÿä¿å­˜æ¶ˆæ¯çš„å‡½æ•°
+ async function saveContactMessage(data: { name: string; email: string; message: string }) {
+   // å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè¿æ¥åˆ°æ•°æ®åº“æˆ–API
+   console.log('ä¿å­˜æ¶ˆæ¯:', data);
+   // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ
+   await new Promise(resolve => setTimeout(resolve, 1000));
+   return { success: true };
+ }
  ```
  
  åˆ›å»ºå’Œä½¿ç”¨ä¸Šä¸‹æ–‡ï¼š
  
- ```jsx
+ ```tsx
  'use client';
  
- import { createContext, useContext, useState } from 'react';
+ import { createContext, useContext, useState, ReactNode } from 'react';
+ 
+ // å®šä¹‰ä¸Šä¸‹æ–‡ç±»å‹
+ interface ThemeContextType {
+   theme: 'light' | 'dark';
+   toggleTheme: () => void;
+ }
  
  // åˆ›å»ºä¸Šä¸‹æ–‡
- const ThemeContext = createContext(null);
+ const ThemeContext = createContext<ThemeContextType | null>(null);
  
  // æä¾›è€…ç»„ä»¶
- export function ThemeProvider({ children }) {
-   const [theme, setTheme] = useState('light');
+ export function ThemeProvider({ children }: { children: ReactNode }) {
+   const [theme, setTheme] = useState<'light' | 'dark'>('light');
    
    const toggleTheme = () => {
    );
  }
+ 
+ // è‡ªå®šä¹‰é’©å­ï¼Œç®€åŒ–ä¸Šä¸‹æ–‡ä½¿ç”¨
+ export function useTheme() {
+   const context = useContext(ThemeContext);
+   if (!context) {
+     throw new Error('useTheme must be used within a ThemeProvider');
+   }
+   return context;
+ }
  
  // ä½¿ç”¨ä¸Šä¸‹æ–‡çš„ç»„ä»¶
  export function ThemedButton() {
-   const { theme, toggleTheme } = useContext(ThemeContext);
+   const { theme, toggleTheme } = useTheme();
    
    return (
        style={{ 
          backgroundColor: theme === 'light' ? '#fff' : '#333',
-         color: theme === 'light' ? '#333' : '#fff'
+         color: theme === 'light' ? '#333' : '#fff',
+         padding: '8px 16px',
+         border: '1px solid #ccc',
+         borderRadius: '4px'
        }}
      >
  å¤„ç†å¤æ‚çŠ¶æ€é€»è¾‘ï¼š
  
- ```jsx
+ ```tsx
  'use client';
  
  import { useReducer } from 'react';
  
+ // å®šä¹‰çŠ¶æ€ç±»å‹
+ interface CounterState {
+   count: number;
+ }
+ 
+ // å®šä¹‰åŠ¨ä½œç±»å‹
+ type CounterAction = 
+   | { type: 'increment' }
+   | { type: 'decrement' }
+   | { type: 'reset' };
+ 
  // å®šä¹‰åˆå§‹çŠ¶æ€
- const initialState = { count: 0 };
+ const initialState: CounterState = { count: 0 };
  
  // å®šä¹‰reducerå‡½æ•°
- function reducer(state, action) {
+ function reducer(state: CounterState, action: CounterAction): CounterState {
    switch (action.type) {
      case 'increment':
        return { count: 0 };
      default:
-       throw new Error('æœªçŸ¥æ“ä½œ');
+       return state;
    }
  }
    
    return (
-     <div>
-       <p>è®¡æ•°: {state.count}</p>
-       <button onClick={() => dispatch({ type: 'increment' })}>+</button>
-       <button onClick={() => dispatch({ type: 'decrement' })}>-</button>
-       <button onClick={() => dispatch({ type: 'reset' })}>é‡ç½®</button>
+     <div className="p-4 border rounded-lg shadow-sm">
+       <p className="text-xl font-bold mb-4">è®¡æ•°: {state.count}</p>
+       <div className="flex space-x-2">
+         <button 
+           onClick={() => dispatch({ type: 'increment' })}
+           className="px-3 py-1 bg-blue-500 text-white rounded"
+         >
+           +
+         </button>
+         <button 
+           onClick={() => dispatch({ type: 'decrement' })}
+           className="px-3 py-1 bg-red-500 text-white rounded"
+         >
+           -
+         </button>
+         <button 
+           onClick={() => dispatch({ type: 'reset' })}
+           className="px-3 py-1 bg-gray-500 text-white rounded"
+         >
+           é‡ç½®
+         </button>
+       </div>
      </div>
    );
  ä¼˜åŒ–æ€§èƒ½ï¼š
  
- ```jsx
+ ```tsx
  'use client';
  
  import { useState, useMemo, useCallback } from 'react';
  
- export default function ExpensiveCalculation({ list }) {
+ interface ExpensiveCalculationProps {
+   list: number[];
+ }
+ 
+ export default function ExpensiveCalculation({ list }: ExpensiveCalculationProps) {
    const [count, setCount] = useState(0);
    
    
    return (
-     <div>
+     <div className="p-4 border rounded-lg">
        <p>è®¡æ•°: {count}</p>
        <p>è®¡ç®—ç»“æœ: {expensiveResult}</p>
-       <button onClick={handleClick}>å¢åŠ è®¡æ•°</button>
+       <button 
+         onClick={handleClick}
+         className="mt-2 px-4 py-2 bg-blue-500 text-white rounded"
+       >
+         å¢åŠ è®¡æ•°
+       </button>
      </div>
    );
  ### åœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­è·å–æ•°æ®
  
- ```jsx
- // app/users/page.jsx
+ ```tsx
+ // app/users/page.tsx
+ interface User {
+   id: number;
+   name: string;
+   email: string;
+ }
+ 
  export default async function UsersPage() {
    // è¿™åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œä¸ä¼šå‘é€åˆ°å®¢æˆ·ç«¯
-   const users = await fetch('https://api.example.com/users').then(res => res.json());
+   const users: User[] = await fetch('https://api.example.com/users')
+     .then(res => {
+       if (!res.ok) throw new Error('Failed to fetch users');
+       return res.json();
+     });
    
    return (
-     <div>
-       <h1>ç”¨æˆ·åˆ—è¡¨</h1>
-       <ul>
+     <div className="container mx-auto p-4">
+       <h1 className="text-2xl font-bold mb-4">ç”¨æˆ·åˆ—è¡¨</h1>
+       <ul className="space-y-2">
          {users.map(user => (
-           <li key={user.id}>{user.name}</li>
+           <li key={user.id} className="p-3 bg-gray-100 rounded">
+             <h3 className="font-medium">{user.name}</h3>
+             <p className="text-gray-600">{user.email}</p>
+           </li>
          ))}
        </ul>
  ### åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­è·å–æ•°æ®
  
- ```jsx
+ ```tsx
  'use client';
  
  import { useState, useEffect } from 'react';
+ 
+ interface ApiData {
+   id: string;
+   title: string;
+   content: string;
+ }
  
  export default function ClientFetch() {
-   const [data, setData] = useState(null);
+   const [data, setData] = useState<ApiData[] | null>(null);
    const [loading, setLoading] = useState(true);
+   const [error, setError] = useState<string | null>(null);
    
    useEffect(() => {
      async function fetchData() {
        try {
          const response = await fetch('/api/data');
+         
+         if (!response.ok) {
+           throw new Error(`HTTP error! status: ${response.status}`);
+         }
+         
          const result = await response.json();
          setData(result);
        } catch (error) {
          console.error('è·å–æ•°æ®å¤±è´¥', error);
+         setError(error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯');
        } finally {
          setLoading(false);
    }, []);
    
-   if (loading) return <p>åŠ è½½ä¸­...</p>;
-   if (!data) return <p>æ— æ•°æ®</p>;
+   if (loading) return <div className="p-4">åŠ è½½ä¸­...</div>;
+   if (error) return <div className="p-4 text-red-500">é”™è¯¯: {error}</div>;
+   if (!data) return <div className="p-4">æ— æ•°æ®</div>;
    
    return (
-     <div>
-       <h1>å®¢æˆ·ç«¯è·å–çš„æ•°æ®</h1>
-       <pre>{JSON.stringify(data, null, 2)}</pre>
+     <div className="p-4">
+       <h1 className="text-xl font-bold mb-4">å®¢æˆ·ç«¯è·å–çš„æ•°æ®</h1>
+       <div className="space-y-4">
+         {data.map(item => (
+           <div key={item.id} className="border p-3 rounded">
+             <h2 className="font-medium">{item.title}</h2>
+             <p>{item.content}</p>
+           </div>
+         ))}
+       </div>
      </div>
    );
```

---

_****_

ç°åœ¨æˆ‘ä»¬å·²ç»å®Œæˆäº†æ‰€æœ‰å¿…è¦çš„ä¿®æ”¹ï¼Œè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬æ‰€åšçš„å·¥ä½œï¼š

---

_****_

```bash
npm run dev
```

```

> my-mri-library@0.1.0 dev
> next dev --turbopack

file:///Users/andi/Documents/GitHub/my-mri-lib/next.config.mjs:2
import { rehypeShiki } from '@shikijs/rehype'
         ^^^^^^^^^^^
SyntaxError: The requested module '@shikijs/rehype' does not provide an export n
amed 'rehypeShiki'
    at ModuleJob._instantiate (node:internal/modules/esm/module_job:180:21)
    at async ModuleJob.run (node:internal/modules/esm/module_job:263:5)
    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:5
47:26)
    at async loadConfig (/Users/andi/Documents/GitHub/my-mri-lib/node_modules/ne
xt/dist/server/config.js:776
:36)
                                at async Module.nextDev (/Users/andi/Documents/G
itHub/my-mri-lib/node_modules/next/dist/cli/next-dev.js:
190:14)
                            
Node.js v22.12.0

```

---

_****_

çœ‹èµ·æ¥æˆ‘ä»¬åœ¨å¯¼å…¥ `rehypeShiki` æ—¶é‡åˆ°äº†é—®é¢˜ã€‚è®©æˆ‘ä»¬ä¿®å¤ next.config.mjs æ–‡ä»¶ä¸­çš„å¯¼å…¥ï¼š

---

_****_

```diff
  import createMDX from '@next/mdx'
- import { rehypeShiki } from '@shikijs/rehype'
+ import rehypeShiki from '@shikijs/rehype'
  import rehypeSlug from 'rehype-slug'
   
```

---

_****_

è®©æˆ‘ä»¬å†æ¬¡å°è¯•å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

---

_****_

```bash
npm run dev
```

```
andi@andideMacBook-Air my-mri-lib % npm run dev

> my-mri-library@0.1.0 dev
> next dev --turbopack

   â–² Next.js 15.1.7 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://172.20.10.12:3000
   - Environments: .env
   - Experiments (use with caution):
     Â· turbo
     Â· webpackBuildWorker
     Â· parallelServerCompiles
     Â· ...

 âœ“ Starting...
[Error: loader /Users/andi/Documents/GitHub/my-mri-lib/node_modules/@next/mdx/mdx-js-loader.js for match "*.
mdx" does not have serializable options. Ensure that options passed are plain JavaScript objects and values.
]

andi@andideMacBook-Air my-mri-lib %
```

---

_****_

çœ‹èµ·æ¥æˆ‘ä»¬åœ¨ MDX åŠ è½½å™¨é…ç½®ä¸­é‡åˆ°äº†é—®é¢˜ã€‚è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨ rehype-prism-plus æ’ä»¶ä»£æ›¿ Shikiï¼š

---

_****_

```diff
  import createMDX from '@next/mdx'
- import rehypeShiki from '@shikijs/rehype'
+ import rehypePrismPlus from 'rehype-prism-plus'
  import rehypeSlug from 'rehype-slug'
   
      rehypePlugins: [
        rehypeSlug,
-       [rehypeShiki, { 
-         theme: 'github-dark',
-         langs: ['javascript', 'typescript', 'jsx', 'tsx', 'css', 'html', 'json', 'bash', 'markdown', 'python', 'java']
-       }]
+       [rehypePrismPlus, { ignoreMissing: true }]
      ],
    },
```

---

_****_

ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨å…¨å±€æ ·å¼æ–‡ä»¶ä¸­æ·»åŠ  Prism.js çš„æ ·å¼ï¼š

---

_****_

```diff
    font-family: Arial, Helvetica, sans-serif;
  }
+ 
+ /* Prism.js ä»£ç é«˜äº®æ ·å¼ */
+ code[class*="language-"],
+ pre[class*="language-"] {
+   color: #f8f8f2;
+   background: none;
+   font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
+   text-align: left;
+   white-space: pre;
+   word-spacing: normal;
+   word-break: normal;
+   word-wrap: normal;
+   line-height: 1.5;
+   tab-size: 4;
+   hyphens: none;
+ }
+ 
+ pre[class*="language-"] {
+   padding: 1em;
+   margin: .5em 0;
+   overflow: auto;
+   border-radius: 0.5em;
+ }
+ 
+ :not(pre) > code[class*="language-"],
+ pre[class*="language-"] {
+   background: #282a36;
+ }
+ 
+ :not(pre) > code[class*="language-"] {
+   padding: .1em;
+   border-radius: .3em;
+   white-space: normal;
+ }
+ 
+ .token.comment,
+ .token.prolog,
+ .token.doctype,
+ .token.cdata {
+   color: #6272a4;
+ }
+ 
+ .token.punctuation {
+   color: #f8f8f2;
+ }
+ 
+ .namespace {
+   opacity: .7;
+ }
+ 
+ .token.property,
+ .token.tag,
+ .token.constant,
+ .token.symbol,
+ .token.deleted {
+   color: #ff79c6;
+ }
+ 
+ .token.boolean,
+ .token.number {
+   color: #bd93f9;
+ }
+ 
+ .token.selector,
+ .token.attr-name,
+ .token.string,
+ .token.char,
+ .token.builtin,
+ .token.inserted {
+   color: #50fa7b;
+ }
+ 
+ .token.operator,
+ .token.entity,
+ .token.url,
+ .language-css .token.string,
+ .style .token.string {
+   color: #f8f8f2;
+ }
+ 
+ .token.atrule,
+ .token.attr-value,
+ .token.keyword {
+   color: #ff79c6;
+ }
+ 
+ .token.function,
+ .token.class-name {
+   color: #8be9fd;
+ }
+ 
+ .token.regex,
+ .token.important,
+ .token.variable {
+   color: #f1fa8c;
+ }
+ 
+ .token.important,
+ .token.bold {
+   font-weight: bold;
+ }
+ 
+ .token.italic {
+   font-style: italic;
+ }
+ 
+ .token.entity {
+   cursor: help;
+ }
  
  /* ç¡®ä¿å†…å®¹ä¸ä¼šè¦†ç›–å¯¼èˆªæ  */
    animation: fadeIn 0.3s ease-in-out forwards;
  }
+ 
+ /* ä»£ç é«˜äº®ç›¸å…³æ ·å¼ */
+ .prose pre {
+   position: relative;
+   background-color: rgb(24, 24, 27);
+   color: rgb(244, 244, 245);
+   padding: 1rem;
+   border-radius: 0.5rem;
+   overflow-x: auto;
+   border: 1px solid rgb(39, 39, 42);
+   margin: 1.5rem 0;
+ }
+ 
+ .prose pre code {
+   background-color: transparent;
+   padding: 0;
+   border-radius: 0;
+   color: inherit;
+   font-size: 0.875rem;
+   line-height: 1.7;
+   font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
+ }
+ 
+ /* è¡Œå†…ä»£ç æ ·å¼ */
+ .prose :not(pre) > code {
+   background-color: rgb(243, 244, 246);
+   color: rgb(220, 38, 38);
+   padding: 0.2rem 0.4rem;
+   border-radius: 0.25rem;
+   font-size: 0.875rem;
+   font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
+ }
+ 
+ .dark .prose :not(pre) > code {
+   background-color: rgb(31, 41, 55);
+   color: rgb(248, 113, 113);
+ }
+ 
+ /* ä»£ç å—è¯­è¨€æ ‡ç­¾ */
+ .prose pre[data-language]::before {
+   content: attr(data-language);
+   position: absolute;
+   top: 0.5rem;
+   right: 1rem;
+   font-size: 0.75rem;
+   color: rgb(156, 163, 175);
+   text-transform: uppercase;
+ }
+ 
+ /* ä»£ç å—å¤åˆ¶æŒ‰é’® */
+ .prose pre .copy-button {
+   position: absolute;
+   top: 0.5rem;
+   right: 0.5rem;
+   padding: 0.25rem;
+   background-color: rgb(55, 65, 81);
+   border-radius: 0.25rem;
+   opacity: 0;
+   transition: opacity 0.2s;
+ }
+ 
+ .prose pre:hover .copy-button {
+   opacity: 1;
+ }
+ 
+ /* ä»£ç è¡Œé«˜äº® */
+ .prose pre .highlighted-line {
+   background-color: rgba(55, 65, 81, 0.5);
+   display: block;
+   margin: 0 -1rem;
+   padding: 0 1rem;
+ }
  
  @layer utilities {
    }
  }
- 
- /* ä»£ç é«˜äº®ç›¸å…³æ ·å¼ */
- .prose pre {
-   position: relative;
-   background-color: rgb(24, 24, 27);
-   color: rgb(244, 244, 245);
-   padding: 1rem;
-   border-radius: 0.5rem;
-   overflow-x: auto;
-   border: 1px solid rgb(39, 39, 42);
-   margin: 1.5rem 0;
- }
- 
- .prose pre code {
-   background-color: transparent;
-   padding: 0;
-   border-radius: 0;
-   color: inherit;
-   font-size: 0.875rem;
-   line-height: 1.7;
-   font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
- }
- 
- /* è¡Œå†…ä»£ç æ ·å¼ */
- .prose :not(pre) > code {
-   background-color: rgb(243, 244, 246);
-   color: rgb(220, 38, 38);
-   padding: 0.2rem 0.4rem;
-   border-radius: 0.25rem;
-   font-size: 0.875rem;
-   font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
- }
- 
- .dark .prose :not(pre) > code {
-   background-color: rgb(31, 41, 55);
-   color: rgb(248, 113, 113);
- }
- 
- /* ä»£ç å—è¯­è¨€æ ‡ç­¾ */
- .prose pre[data-language]::before {
-   content: attr(data-language);
-   position: absolute;
-   top: 0.5rem;
-   right: 1rem;
-   font-size: 0.75rem;
-   color: rgb(156, 163, 175);
-   text-transform: uppercase;
- }
- 
- /* ä»£ç å—å¤åˆ¶æŒ‰é’® */
- .prose pre .copy-button {
-   position: absolute;
-   top: 0.5rem;
-   right: 0.5rem;
-   padding: 0.25rem;
-   background-color: rgb(55, 65, 81);
-   border-radius: 0.25rem;
-   opacity: 0;
-   transition: opacity 0.2s;
- }
- 
- .prose pre:hover .copy-button {
-   opacity: 1;
- }
- 
- /* ä»£ç è¡Œé«˜äº® */
- .prose pre .highlighted-line {
-   background-color: rgba(55, 65, 81, 0.5);
-   display: block;
-   margin: 0 -1rem;
-   padding: 0 1rem;
- }
  
```

---

_****_

è®©æˆ‘ä»¬å†æ¬¡å°è¯•å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

---

_****_

```bash
npm run dev
```

```
andi@andideMacBook-Air my-mri-lib % npm run dev

> my-mri-library@0.1.0 dev
> next dev --turbopack

   â–² Next.js 15.1.7 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://172.20.10.12:3000
   - Environments: .env
   - Experiments (use with caution):
     Â· turbo
     Â· webpackBuildWorker
     Â· parallelServerCompiles
     Â· ...

 âœ“ Starting...
[Error: loader /Users/andi/Documents/GitHub/my-mri-lib/node_modules/@next/mdx/mdx-js-loader.js for match "*.
mdx" does not have serializable options. Ensure that options passed are plain JavaScript objects and values.
]

andi@andideMacBook-Air my-mri-lib %
```

---

_****_

çœ‹èµ·æ¥æˆ‘ä»¬ä»ç„¶é‡åˆ°äº† MDX åŠ è½½å™¨çš„é—®é¢˜ã€‚è®©æˆ‘ä»¬å°è¯•ç®€åŒ– next.config.mjs æ–‡ä»¶ï¼Œä¸ä½¿ç”¨ rehype æ’ä»¶ï¼š

---

_****_

```diff
  import createMDX from '@next/mdx'
- import rehypePrismPlus from 'rehype-prism-plus'
- import rehypeSlug from 'rehype-slug'
   
  /** @type {import('next').NextConfig} */
   
  const withMDX = createMDX({
-   // æ·»åŠ  rehype æ’ä»¶è¿›è¡Œä»£ç é«˜äº®
-   options: {
-     rehypePlugins: [
-       rehypeSlug,
-       [rehypePrismPlus, { ignoreMissing: true }]
-     ],
-   },
+   // ç®€åŒ–é…ç½®ï¼Œä¸ä½¿ç”¨ rehype æ’ä»¶
  })
   
```

---

_****_

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¿®æ”¹ mdx-component.tsx æ–‡ä»¶ï¼Œæ·»åŠ ä»£ç é«˜äº®åŠŸèƒ½ï¼š

---

_****_

```diff
    ),
    pre: (props: any) => {
+     const [copied, setCopied] = useState(false);
+     const preRef = useRef<HTMLPreElement>(null);
+     
      // æå–è¯­è¨€ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰
      const className = props.children?.props?.className || '';
-     const language = className.replace(/language-/, '');
+     const match = /language-(\w+)/.exec(className);
+     const language = match ? match[1] : '';
+     
+     const copyToClipboard = () => {
+       if (preRef.current) {
+         const code = preRef.current.textContent || '';
+         navigator.clipboard.writeText(code);
+         setCopied(true);
+         setTimeout(() => setCopied(false), 2000);
+       }
+     };
      
      return (
        <div className="relative group my-6">
          {language && (
-           <div className="absolute right-4 top-3 text-xs font-mono text-gray-400 dark:text-gray-500">
+           <div className="absolute right-12 top-3 text-xs font-mono text-gray-400 dark:text-gray-500 uppercase">
              {language}
            </div>
          )}
          <pre 
-           className="bg-gray-900 dark:bg-gray-950 text-gray-100 p-4 rounded-lg overflow-x-auto border border-gray-800 shadow-md" 
+           ref={preRef}
+           className="language-code p-4 rounded-lg overflow-x-auto" 
            {...props} 
          />
-         <div className="absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity">
          <button
-             onClick={() => {
-               const code = props.children?.props?.children || '';
-               navigator.clipboard.writeText(code);
-               // å¯ä»¥æ·»åŠ å¤åˆ¶æˆåŠŸçš„æç¤º
-             }}
-             className="p-1.5 rounded-md bg-gray-700 hover:bg-gray-600 text-gray-300"
+           onClick={copyToClipboard}
+           className="absolute top-3 right-3 p-1.5 rounded-md bg-gray-700 hover:bg-gray-600 text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity"
            aria-label="å¤åˆ¶ä»£ç "
            title="å¤åˆ¶ä»£ç "
          >
+           {copied ? (
+             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
+               <path d="M20 6L9 17l-5-5"></path>
+             </svg>
+           ) : (
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
+           )}
          </button>
-         </div>
        </div>
      );
    },
    code: (props: any) => {
-     // æ£€æŸ¥æ˜¯å¦åœ¨ pre æ ‡ç­¾å†…
-     const isInPre = React.useContext(React.createContext(false));
+     const isInPre = typeof props.className === 'string' && props.className.includes('language-');
      
      if (isInPre) {
```

---

_****_

è®©æˆ‘ä»¬å†æ¬¡å°è¯•å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

---

_****_

```bash
npm run dev
```

```
andi@andideMacBook-Air my-mri-lib % npm run dev

> my-mri-library@0.1.0 dev
> next dev --turbopack

   â–² Next.js 15.1.7 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://172.20.10.12:3000
   - Environments: .env
   - Experiments (use with caution):
     Â· turbo
     Â· webpackBuildWorker
     Â· parallelServerCompiles
     Â· ...

 âœ“ Starting...
 âœ“ Compiled in 341ms
 âœ“ Ready in 1169ms
 â—‹ Compiling / ...
 âœ“ Compiled / in 3.1s
 GET / 200 in 3306ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 534ms
 GET /api/auth/session 200 in 1001ms
 âœ“ Compiled /_not-found/page in 107ms
 GET /sw.js 404 in 127ms
 GET /api/auth/session 200 in 48ms
 â—‹ Compiling /dashboard ...
 âœ“ Compiled /dashboard in 584ms
 GET /dashboard 200 in 620ms
 GET /avatars/shadcn.jpg 404 in 55ms
 âœ“ Compiled /content/blog in 336ms
Error: Route "/content/blog" used `searchParams.tag`. `searchParams` should be awaited before using its prop
erties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlesPage (app/(pages)/content/blog/page.tsx:67:35)
  65 |   
  66 |   // å¤„ç†æ ‡ç­¾è¿‡æ»¤
> 67 |   const selectedTag = searchParams.tag || ''
     |                                   ^
  68 |   const filteredBlogs = selectedTag 
  69 |     ? allBlogs.filter(blog => 
  70 |         blog.tags && blog.tags.includes(selectedTag)
Error: Route "/content/blog" used `searchParams.page`. `searchParams` should be awaited before using its pro
perties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlesPage (app/(pages)/content/blog/page.tsx:75:44)
  73 |   
  74 |   // å¤„ç†åˆ†é¡µ
> 75 |   const currentPage = parseInt(searchParams.page || '1', 10)
     |                                            ^
  76 |   const blogsPerPage = 9
  77 |   const totalPages = Math.ceil(filteredBlogs.length / blogsPerPage)
  78 |   
Current session data: {
  session: undefined,
  name: undefined,
  email: undefined,
  image: undefined
}
 GET /content/blog 200 in 537ms
 GET /api/auth/session 200 in 74ms
 GET /avatars/shadcn.jpg 404 in 97ms
 âœ“ Compiled /content/blog/[slug] in 217ms
Error: Route "/content/blog/[slug]" used `params.slug`. `params` should be awaited before using its properti
es. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlePage (app/(pages)/content/blog/[slug]/page.tsx:125:44)
  123 | // æ–‡ç« é¡µé¢ç»„ä»¶
  124 | export default async function ArticlePage({ params }: PageProps) {
> 125 |   const slug = await Promise.resolve(params.slug)
      |                                            ^
  126 |   const filePath = path.join(process.cwd(), `app/(pages)/content/blog/${slug}.mdx`)
  127 |   
  128 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
Error: Route "/content/blog/[slug]" used `params.slug`. `params` should be awaited before using its properti
es. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at Module.generateMetadata (app/(pages)/content/blog/[slug]/page.tsx:31:44)
  29 | // ç”Ÿæˆå…ƒæ•°æ®
  30 | export async function generateMetadata({ params }: PageProps): Promise<Metadata> {
> 31 |   const slug = await Promise.resolve(params.slug)
     |                                            ^
  32 |   const filePath = path.join(process.cwd(), `app/(pages)/content/blog/${slug}.mdx`)
  33 |   
  34 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
 GET /content/blog/from-react-to-nextjs 200 in 620ms
 GET /sw.js 404 in 44ms
 âœ“ Compiled /content/articles in 198ms
Error: Route "/content/articles" used `searchParams.tag`. `searchParams` should be awaited before using its 
properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlesPage (app/(pages)/content/articles/page.tsx:67:35)
  65 |   
  66 |   // å¤„ç†æ ‡ç­¾è¿‡æ»¤
> 67 |   const selectedTag = searchParams.tag || ''
     |                                   ^
  68 |   const filteredArticles = selectedTag 
  69 |     ? allArticles.filter(article => 
  70 |         article.tags && article.tags.includes(selectedTag)
Error: Route "/content/articles" used `searchParams.page`. `searchParams` should be awaited before using its
 properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlesPage (app/(pages)/content/articles/page.tsx:75:44)
  73 |   
  74 |   // å¤„ç†åˆ†é¡µ
> 75 |   const currentPage = parseInt(searchParams.page || '1', 10)
     |                                            ^
  76 |   const articlesPerPage = 9
  77 |   const totalPages = Math.ceil(filteredArticles.length / articlesPerPage)
  78 |   
Current session data: {
  session: undefined,
  name: undefined,
  email: undefined,
  image: undefined
}
 GET /content/articles 200 in 265ms
 GET /api/auth/session 200 in 36ms
 GET /avatars/shadcn.jpg 404 in 57ms
 âœ“ Compiled /content/articles/[slug] in 229ms
Error: Route "/content/articles/[slug]" used `params.slug`. `params` should be awaited before using its prop
erties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlePage (app/(pages)/content/articles/[slug]/page.tsx:125:44)
  123 | // æ–‡ç« é¡µé¢ç»„ä»¶
  124 | export default async function ArticlePage({ params }: PageProps) {
> 125 |   const slug = await Promise.resolve(params.slug)
      |                                            ^
  126 |   const filePath = path.join(process.cwd(), `app/(pages)/content/articles/${slug}.mdx`)
  127 |   
  128 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
Error: Route "/content/articles/[slug]" used `params.slug`. `params` should be awaited before using its prop
erties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at Module.generateMetadata (app/(pages)/content/articles/[slug]/page.tsx:31:44)
  29 | // ç”Ÿæˆå…ƒæ•°æ®
  30 | export async function generateMetadata({ params }: PageProps): Promise<Metadata> {
> 31 |   const slug = await Promise.resolve(params.slug)
     |                                            ^
  32 |   const filePath = path.join(process.cwd(), `app/(pages)/content/articles/${slug}.mdx`)
  33 |   
  34 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
 GET /content/articles/principles-of-DWI 200 in 645ms
 GET /sw.js 404 in 34ms
Error: Route "/content/articles/[slug]" used `params.slug`. `params` should be awaited before using its prop
erties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlePage (app/(pages)/content/articles/[slug]/page.tsx:125:44)
  123 | // æ–‡ç« é¡µé¢ç»„ä»¶
  124 | export default async function ArticlePage({ params }: PageProps) {
> 125 |   const slug = await Promise.resolve(params.slug)
      |                                            ^
  126 |   const filePath = path.join(process.cwd(), `app/(pages)/content/articles/${slug}.mdx`)
  127 |   
  128 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
Error: Route "/content/articles/[slug]" used `params.slug`. `params` should be awaited before using its prop
erties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at Module.generateMetadata (app/(pages)/content/articles/[slug]/page.tsx:31:44)
  29 | // ç”Ÿæˆå…ƒæ•°æ®
  30 | export async function generateMetadata({ params }: PageProps): Promise<Metadata> {
> 31 |   const slug = await Promise.resolve(params.slug)
     |                                            ^
  32 |   const filePath = path.join(process.cwd(), `app/(pages)/content/articles/${slug}.mdx`)
  33 |   
  34 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
 GET /content/articles/principles-of-DTI 200 in 64ms
Error: Route "/content/articles/[slug]" used `params.slug`. `params` should be awaited before using its prop
erties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlePage (app/(pages)/content/articles/[slug]/page.tsx:125:44)
  123 | // æ–‡ç« é¡µé¢ç»„ä»¶
  124 | export default async function ArticlePage({ params }: PageProps) {
> 125 |   const slug = await Promise.resolve(params.slug)
      |                                            ^
  126 |   const filePath = path.join(process.cwd(), `app/(pages)/content/articles/${slug}.mdx`)
  127 |   
  128 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
Error: Route "/content/articles/[slug]" used `params.slug`. `params` should be awaited before using its prop
erties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at Module.generateMetadata (app/(pages)/content/articles/[slug]/page.tsx:31:44)
  29 | // ç”Ÿæˆå…ƒæ•°æ®
  30 | export async function generateMetadata({ params }: PageProps): Promise<Metadata> {
> 31 |   const slug = await Promise.resolve(params.slug)
     |                                            ^
  32 |   const filePath = path.join(process.cwd(), `app/(pages)/content/articles/${slug}.mdx`)
  33 |   
  34 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
 GET /content/articles/principles-of-DTI 200 in 49ms
Error: Route "/content/articles/[slug]" used `params.slug`. `params` should be awaited before using its prop
erties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlePage (app/(pages)/content/articles/[slug]/page.tsx:125:44)
  123 | // æ–‡ç« é¡µé¢ç»„ä»¶
  124 | export default async function ArticlePage({ params }: PageProps) {
> 125 |   const slug = await Promise.resolve(params.slug)
      |                                            ^
  126 |   const filePath = path.join(process.cwd(), `app/(pages)/content/articles/${slug}.mdx`)
  127 |   
  128 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
Error: Route "/content/articles/[slug]" used `params.slug`. `params` should be awaited before using its prop
erties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at Module.generateMetadata (app/(pages)/content/articles/[slug]/page.tsx:31:44)
  29 | // ç”Ÿæˆå…ƒæ•°æ®
  30 | export async function generateMetadata({ params }: PageProps): Promise<Metadata> {
> 31 |   const slug = await Promise.resolve(params.slug)
     |                                            ^
  32 |   const filePath = path.join(process.cwd(), `app/(pages)/content/articles/${slug}.mdx`)
  33 |   
  34 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
 GET /content/articles/von-hippel-lindau-syndrome 200 in 58ms
Error: Route "/content/blog" used `searchParams.tag`. `searchParams` should be awaited before using its prop
erties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlesPage (app/(pages)/content/blog/page.tsx:67:35)
  65 |   
  66 |   // å¤„ç†æ ‡ç­¾è¿‡æ»¤
> 67 |   const selectedTag = searchParams.tag || ''
     |                                   ^
  68 |   const filteredBlogs = selectedTag 
  69 |     ? allBlogs.filter(blog => 
  70 |         blog.tags && blog.tags.includes(selectedTag)
Error: Route "/content/blog" used `searchParams.page`. `searchParams` should be awaited before using its pro
perties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlesPage (app/(pages)/content/blog/page.tsx:75:44)
  73 |   
  74 |   // å¤„ç†åˆ†é¡µ
> 75 |   const currentPage = parseInt(searchParams.page || '1', 10)
     |                                            ^
  76 |   const blogsPerPage = 9
  77 |   const totalPages = Math.ceil(filteredBlogs.length / blogsPerPage)
  78 |   
Current session data: {
  session: undefined,
  name: undefined,
  email: undefined,
  image: undefined
}
 GET /content/blog 200 in 221ms
 GET /api/auth/session 200 in 74ms
 GET /avatars/shadcn.jpg 404 in 110ms
Error: Route "/content/blog/[slug]" used `params.slug`. `params` should be awaited before using its properti
es. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at ArticlePage (app/(pages)/content/blog/[slug]/page.tsx:125:44)
  123 | // æ–‡ç« é¡µé¢ç»„ä»¶
  124 | export default async function ArticlePage({ params }: PageProps) {
> 125 |   const slug = await Promise.resolve(params.slug)
      |                                            ^
  126 |   const filePath = path.join(process.cwd(), `app/(pages)/content/blog/${slug}.mdx`)
  127 |   
  128 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
Error: Route "/content/blog/[slug]" used `params.slug`. `params` should be awaited before using its properti
es. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at Module.generateMetadata (app/(pages)/content/blog/[slug]/page.tsx:31:44)
  29 | // ç”Ÿæˆå…ƒæ•°æ®
  30 | export async function generateMetadata({ params }: PageProps): Promise<Metadata> {
> 31 |   const slug = await Promise.resolve(params.slug)
     |                                            ^
  32 |   const filePath = path.join(process.cwd(), `app/(pages)/content/blog/${slug}.mdx`)
  33 |   
  34 |   // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
 GET /content/blog/nextjs-tailwind-blog 200 in 73ms
 GET /sw.js 404 in 39ms
```

---

_****_



---

_**User**_

ä»£ç ä»æœªå®ç°é«˜äº®

---

_**Assistant**_

æˆ‘çœ‹åˆ°ä»£ç é«˜äº®ä»æœªå®ç°ã€‚è®©æˆ‘æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

---

_****_

```diff
  import createMDX from '@next/mdx'
+ import rehypePrism from 'rehype-prism-plus'
   
  /** @type {import('next').NextConfig} */
   
  const withMDX = createMDX({
-   // ç®€åŒ–é…ç½®ï¼Œä¸ä½¿ç”¨ rehype æ’ä»¶
+   // æ·»åŠ  rehype-prism-plus æ’ä»¶è¿›è¡Œä»£ç é«˜äº®
+   options: {
+     rehypePlugins: [
+       [rehypePrism, { ignoreMissing: true, showLineNumbers: true }]
+     ],
+   },
  })
   
```

---

_****_

ç°åœ¨ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä¸“é—¨çš„ CSS æ–‡ä»¶æ¥å­˜æ”¾ä»£ç é«˜äº®çš„æ ·å¼ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸å…¨å±€æ ·å¼å†²çªï¼š

---

_****_



---

_****_



---



---

