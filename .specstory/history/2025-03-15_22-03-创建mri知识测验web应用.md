<!-- Generated by SpecStory -->

# 创建MRI知识测验Web应用 (2025-03-16 06:03:08)

_**User**_

生成一个MR知识测验的小web应用

---

_**Assistant**_

我来帮您创建一个MRI知识测验的Web应用。我们将使用Next.js和TypeScript来构建这个应用，并添加一些现代化的UI组件。

首先，让我看看当前的项目结构。


---

<details>
            <summary>Listed current directory • **25** results</summary>
        
| Name |
|-------|
| 📁 `.next` |
| 📁 `.git` |
| 📁 `styles` |
| 📄 `next.config.mjs` |
| 📄 `package-lock.json` |
| 📄 `package.json` |
| 📁 `node_modules` |
| 📁 `prisma` |
| 📄 `.env` |
| 📄 `middleware.ts` |
| 📄 `next-env.d.ts` |
| 📁 `scripts` |
| 📄 `tailwind.config.ts` |
| 📄 `tsconfig.json` |
| 📁 `types` |
| 📁 `public` |
| 📄 `postcss.config.mjs` |
| 📁 `data` |
| 📁 `hooks` |
| 📁 `lib` |
| 📁 `components` |
| 📁 `app` |
| 📄 `components.json` |
| 📄 `.gitignore` |
| 📁 `.specstory` |

</details>

---

我看到这是一个Next.js项目。让我们创建一个MRI知识测验页面。我们需要：
1. 创建测验页面组件
2. 添加一些MRI相关的测验题目
3. 实现测验逻辑和计分功能

首先，让我们创建测验页面：


---

```diff
- 
+ 'use client';
+ 
+ import { useState } from 'react';
+ import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
+ import { Button } from "@/components/ui/button";
+ import { Progress } from "@/components/ui/progress";
+ 
+ interface Question {
+   id: number;
+   question: string;
+   options: string[];
+   correctAnswer: number;
+ }
+ 
+ const questions: Question[] = [
+   {
+     id: 1,
+     question: "MRI扫描中使用的主要磁场强度通常是多少特斯拉？",
+     options: ["1.5T", "3T", "7T", "9.4T"],
+     correctAnswer: 0
+   },
+   {
+     id: 2,
+     question: "在MRI中，T1加权图像主要反映什么？",
+     options: ["水含量", "脂肪含量", "铁含量", "钙含量"],
+     correctAnswer: 1
+   },
+   {
+     id: 3,
+     question: "MRI扫描中最常用的造影剂是什么？",
+     options: ["钆", "碘", "钡", "铁"],
+     correctAnswer: 0
+   }
+ ];
+ 
+ export default function MRIQuiz() {
+   const [currentQuestion, setCurrentQuestion] = useState(0);
+   const [score, setScore] = useState(0);
+   const [showScore, setShowScore] = useState(false);
+   const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);
+ 
+   const handleAnswerClick = (answerIndex: number) => {
+     setSelectedAnswer(answerIndex);
+   };
+ 
+   const handleNext = () => {
+     if (selectedAnswer === questions[currentQuestion].correctAnswer) {
+       setScore(score + 1);
+     }
+ 
+     if (currentQuestion + 1 < questions.length) {
+       setCurrentQuestion(currentQuestion + 1);
+       setSelectedAnswer(null);
+     } else {
+       setShowScore(true);
+     }
+   };
+ 
+   const progress = ((currentQuestion + 1) / questions.length) * 100;
+ 
+   return (
+     <div className="container mx-auto p-4 max-w-2xl">
+       <h1 className="text-3xl font-bold text-center mb-8">MRI知识测验</h1>
+       
+       <Progress value={progress} className="mb-8" />
+       
+       {!showScore ? (
+         <Card>
+           <CardHeader>
+             <CardTitle>问题 {currentQuestion + 1}/{questions.length}</CardTitle>
+           </CardHeader>
+           <CardContent>
+             <p className="text-xl mb-6">{questions[currentQuestion].question}</p>
+             <div className="space-y-4">
+               {questions[currentQuestion].options.map((option, index) => (
+                 <Button
+                   key={index}
+                   variant={selectedAnswer === index ? "default" : "outline"}
+                   className="w-full text-left"
+                   onClick={() => handleAnswerClick(index)}
+                 >
+                   {option}
+                 </Button>
+               ))}
+             </div>
+             <Button
+               className="mt-6 w-full"
+               onClick={handleNext}
+               disabled={selectedAnswer === null}
+             >
+               {currentQuestion === questions.length - 1 ? "完成" : "下一题"}
+             </Button>
+           </CardContent>
+         </Card>
+       ) : (
+         <Card>
+           <CardHeader>
+             <CardTitle>测验完成！</CardTitle>
+           </CardHeader>
+           <CardContent>
+             <p className="text-xl mb-4">
+               你的得分：{score} / {questions.length}
+             </p>
+             <p className="text-lg">
+               正确率：{((score / questions.length) * 100).toFixed(1)}%
+             </p>
+             <Button
+               className="mt-6 w-full"
+               onClick={() => {
+                 setCurrentQuestion(0);
+                 setScore(0);
+                 setShowScore(false);
+                 setSelectedAnswer(null);
+               }}
+             >
+               重新开始
+             </Button>
+           </CardContent>
+         </Card>
+       )}
+     </div>
+   );
+ }
+ 
```

---

我已经创建了一个基本的MRI知识测验应用。这个应用包含以下功能：

1. 现代化的UI设计，使用了卡片组件和进度条
2. 三个基本的MRI相关问题
3. 答题进度显示
4. 得分统计和正确率计算
5. 重新开始功能

主要特点：
- 使用TypeScript确保类型安全
- 使用React Hooks管理状态
- 响应式设计，适配各种屏幕尺寸
- 清晰的用户界面和交互反馈

您现在可以通过访问 `/mri-quiz` 路径来访问这个测验。要添加更多问题，只需在 `questions` 数组中添加新的问题对象即可。

您是否需要：
1. 添加更多的问题？
2. 修改现有的UI设计？
3. 添加更多功能，比如计时器或难度选择？
4. 添加答题反馈（显示正确答案的解释）？

请告诉我您想要进行哪些改进，我很乐意帮您实现。

---

_**User**_

4. 添加答题反馈

---

_**Assistant**_

我来帮您添加答题反馈功能，包括正确答案的解释和即时反馈。我们需要修改问题数据结构并更新UI组件。

首先，让我们修改代码：


---

```diff
  import { Button } from "@/components/ui/button";
  import { Progress } from "@/components/ui/progress";
+ import { Alert, AlertDescription } from "@/components/ui/alert";
+ import { CheckCircle2, XCircle } from "lucide-react";
  
  interface Question {
    options: string[];
    correctAnswer: number;
+   explanation: string;
  }
  
      question: "MRI扫描中使用的主要磁场强度通常是多少特斯拉？",
      options: ["1.5T", "3T", "7T", "9.4T"],
-     correctAnswer: 0
+     correctAnswer: 0,
+     explanation: "1.5T是最常用的临床MRI磁场强度，它提供了良好的图像质量和安全性。3T虽然分辨率更高，但成本更高且可能产生更多伪影。7T和9.4T主要用于研究目的。"
    },
    {
      id: 2,
      question: "在MRI中，T1加权图像主要反映什么？",
      options: ["水含量", "脂肪含量", "铁含量", "钙含量"],
-     correctAnswer: 1
+     correctAnswer: 1,
+     explanation: "T1加权图像主要反映组织中的脂肪含量。在T1加权图像中，脂肪组织呈现高信号（亮），而水呈现低信号（暗）。这种对比对于观察解剖结构特别有用。"
    },
    {
      id: 3,
      question: "MRI扫描中最常用的造影剂是什么？",
      options: ["钆", "碘", "钡", "铁"],
-     correctAnswer: 0
+     correctAnswer: 0,
+     explanation: "钆（Gadolinium）是MRI最常用的造影剂。它通过改变局部组织的弛豫时间来增强对比度。碘和钡主要用于CT扫描，而铁基造影剂使用较少。"
    }
  ];
    const [showScore, setShowScore] = useState(false);
    const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);
+   const [showFeedback, setShowFeedback] = useState(false);
  
    const handleAnswerClick = (answerIndex: number) => {
        setScore(score + 1);
      }
+     setShowFeedback(true);
+   };
  
+   const handleContinue = () => {
      if (currentQuestion + 1 < questions.length) {
        setCurrentQuestion(currentQuestion + 1);
        setSelectedAnswer(null);
+       setShowFeedback(false);
      } else {
        setShowScore(true);
                  <Button
                    key={index}
-                   variant={selectedAnswer === index ? "default" : "outline"}
+                   variant={
+                     showFeedback
+                       ? index === questions[currentQuestion].correctAnswer
+                         ? "default"
+                         : selectedAnswer === index
+                         ? "destructive"
+                         : "outline"
+                       : selectedAnswer === index
+                       ? "default"
+                       : "outline"
+                   }
                    className="w-full text-left"
-                   onClick={() => handleAnswerClick(index)}
+                   onClick={() => !showFeedback && handleAnswerClick(index)}
+                   disabled={showFeedback}
                  >
                    {option}
                  </Button>
                ))}
              </div>
+             
+             {showFeedback && (
+               <Alert className={`mt-4 ${selectedAnswer === questions[currentQuestion].correctAnswer ? 'bg-green-50' : 'bg-red-50'}`}>
+                 {selectedAnswer === questions[currentQuestion].correctAnswer ? (
+                   <CheckCircle2 className="h-4 w-4 text-green-500" />
+                 ) : (
+                   <XCircle className="h-4 w-4 text-red-500" />
+                 )}
+                 <AlertDescription className="mt-2">
+                   {questions[currentQuestion].explanation}
+                 </AlertDescription>
+               </Alert>
+             )}
+ 
              <Button
                className="mt-6 w-full"
-               onClick={handleNext}
+               onClick={showFeedback ? handleContinue : handleNext}
                disabled={selectedAnswer === null}
              >
-               {currentQuestion === questions.length - 1 ? "完成" : "下一题"}
+               {showFeedback 
+                 ? (currentQuestion === questions.length - 1 ? "完成" : "继续")
+                 : "检查答案"}
              </Button>
            </CardContent>
                  setShowScore(false);
                  setSelectedAnswer(null);
+                 setShowFeedback(false);
                }}
              >
```

---

我已经为测验添加了详细的答题反馈功能，主要更新包括：

1. 为每个问题添加了解释（explanation）字段
2. 添加了视觉反馈：
   - 正确答案显示绿色对勾
   - 错误答案显示红色叉号
   - 正确答案选项高亮显示
   - 错误选择的选项显示红色
3. 改进了答题流程：
   - 选择答案后点击"检查答案"
   - 显示详细解释
   - 点击"继续"进入下一题
4. 添加了状态管理：
   - 新增 `showFeedback` 状态控制反馈显示
   - 在显示反馈时禁用选项按钮
   - 重置时清除反馈状态

现在的答题流程更加完整：
1. 用户选择答案
2. 点击"检查答案"按钮
3. 显示正确/错误反馈和详细解释
4. 点击"继续"进入下一题
5. 完成所有题目后显示总分

您觉得这个反馈系统如何？是否需要：
1. 调整反馈的视觉样式？
2. 添加更多的解释内容？
3. 添加动画效果？
4. 其他改进建议？

---

_**User**_

重构页面：将quiz的数据保存到quizzes.ts中

---

_**Assistant**_

好的，我来帮您重构代码，将测验数据分离到单独的文件中。

首先，让我们创建测验数据文件：


---

```diff
- 
+ export interface Question {
+   id: number;
+   question: string;
+   options: string[];
+   correctAnswer: number;
+   explanation: string;
+ }
+ 
+ export interface Quiz {
+   id: string;
+   title: string;
+   description: string;
+   questions: Question[];
+ }
+ 
+ export const mriQuiz: Quiz = {
+   id: "mri-basic",
+   title: "MRI基础知识测验",
+   description: "测试你对MRI基础知识的掌握程度",
+   questions: [
+     {
+       id: 1,
+       question: "MRI扫描中使用的主要磁场强度通常是多少特斯拉？",
+       options: ["1.5T", "3T", "7T", "9.4T"],
+       correctAnswer: 0,
+       explanation: "1.5T是最常用的临床MRI磁场强度，它提供了良好的图像质量和安全性。3T虽然分辨率更高，但成本更高且可能产生更多伪影。7T和9.4T主要用于研究目的。"
+     },
+     {
+       id: 2,
+       question: "在MRI中，T1加权图像主要反映什么？",
+       options: ["水含量", "脂肪含量", "铁含量", "钙含量"],
+       correctAnswer: 1,
+       explanation: "T1加权图像主要反映组织中的脂肪含量。在T1加权图像中，脂肪组织呈现高信号（亮），而水呈现低信号（暗）。这种对比对于观察解剖结构特别有用。"
+     },
+     {
+       id: 3,
+       question: "MRI扫描中最常用的造影剂是什么？",
+       options: ["钆", "碘", "钡", "铁"],
+       correctAnswer: 0,
+       explanation: "钆（Gadolinium）是MRI最常用的造影剂。它通过改变局部组织的弛豫时间来增强对比度。碘和钡主要用于CT扫描，而铁基造影剂使用较少。"
+     }
+   ]
+ };
+ 
```

---

现在让我们更新测验页面，使用新的数据结构：


---

```diff
  import { Alert, AlertDescription } from "@/components/ui/alert";
  import { CheckCircle2, XCircle } from "lucide-react";
- 
- interface Question {
-   id: number;
-   question: string;
-   options: string[];
-   correctAnswer: number;
-   explanation: string;
- }
- 
- const questions: Question[] = [
-   {
-     id: 1,
-     question: "MRI扫描中使用的主要磁场强度通常是多少特斯拉？",
-     options: ["1.5T", "3T", "7T", "9.4T"],
-     correctAnswer: 0,
-     explanation: "1.5T是最常用的临床MRI磁场强度，它提供了良好的图像质量和安全性。3T虽然分辨率更高，但成本更高且可能产生更多伪影。7T和9.4T主要用于研究目的。"
-   },
-   {
-     id: 2,
-     question: "在MRI中，T1加权图像主要反映什么？",
-     options: ["水含量", "脂肪含量", "铁含量", "钙含量"],
-     correctAnswer: 1,
-     explanation: "T1加权图像主要反映组织中的脂肪含量。在T1加权图像中，脂肪组织呈现高信号（亮），而水呈现低信号（暗）。这种对比对于观察解剖结构特别有用。"
-   },
-   {
-     id: 3,
-     question: "MRI扫描中最常用的造影剂是什么？",
-     options: ["钆", "碘", "钡", "铁"],
-     correctAnswer: 0,
-     explanation: "钆（Gadolinium）是MRI最常用的造影剂。它通过改变局部组织的弛豫时间来增强对比度。碘和钡主要用于CT扫描，而铁基造影剂使用较少。"
-   }
- ];
+ import { mriQuiz } from "@/data/quizzes";
  
  export default function MRIQuiz() {
  
    const handleNext = () => {
-     if (selectedAnswer === questions[currentQuestion].correctAnswer) {
+     if (selectedAnswer === mriQuiz.questions[currentQuestion].correctAnswer) {
        setScore(score + 1);
      }
  
    const handleContinue = () => {
-     if (currentQuestion + 1 < questions.length) {
+     if (currentQuestion + 1 < mriQuiz.questions.length) {
        setCurrentQuestion(currentQuestion + 1);
        setSelectedAnswer(null);
    };
  
-   const progress = ((currentQuestion + 1) / questions.length) * 100;
+   const progress = ((currentQuestion + 1) / mriQuiz.questions.length) * 100;
  
    return (
      <div className="container mx-auto p-4 max-w-2xl">
-       <h1 className="text-3xl font-bold text-center mb-8">MRI知识测验</h1>
+       <h1 className="text-3xl font-bold text-center mb-2">{mriQuiz.title}</h1>
+       <p className="text-center text-gray-600 mb-8">{mriQuiz.description}</p>
        
        <Progress value={progress} className="mb-8" />
          <Card>
            <CardHeader>
-             <CardTitle>问题 {currentQuestion + 1}/{questions.length}</CardTitle>
+             <CardTitle>问题 {currentQuestion + 1}/{mriQuiz.questions.length}</CardTitle>
            </CardHeader>
            <CardContent>
-             <p className="text-xl mb-6">{questions[currentQuestion].question}</p>
+             <p className="text-xl mb-6">{mriQuiz.questions[currentQuestion].question}</p>
              <div className="space-y-4">
-               {questions[currentQuestion].options.map((option, index) => (
+               {mriQuiz.questions[currentQuestion].options.map((option, index) => (
                  <Button
                    key={index}
                    variant={
                      showFeedback
-                       ? index === questions[currentQuestion].correctAnswer
+                       ? index === mriQuiz.questions[currentQuestion].correctAnswer
                          ? "default"
                          : selectedAnswer === index
              
              {showFeedback && (
-               <Alert className={`mt-4 ${selectedAnswer === questions[currentQuestion].correctAnswer ? 'bg-green-50' : 'bg-red-50'}`}>
-                 {selectedAnswer === questions[currentQuestion].correctAnswer ? (
+               <Alert className={`mt-4 ${selectedAnswer === mriQuiz.questions[currentQuestion].correctAnswer ? 'bg-green-50' : 'bg-red-50'}`}>
+                 {selectedAnswer === mriQuiz.questions[currentQuestion].correctAnswer ? (
                    <CheckCircle2 className="h-4 w-4 text-green-500" />
                  ) : (
                    <XCircle className="h-4 w-4 text-red-500" />
                  )}
                  <AlertDescription className="mt-2">
-                   {questions[currentQuestion].explanation}
+                   {mriQuiz.questions[currentQuestion].explanation}
                  </AlertDescription>
                </Alert>
              >
                {showFeedback 
-                 ? (currentQuestion === questions.length - 1 ? "完成" : "继续")
+                 ? (currentQuestion === mriQuiz.questions.length - 1 ? "完成" : "继续")
                  : "检查答案"}
              </Button>
            <CardContent>
              <p className="text-xl mb-4">
-               你的得分：{score} / {questions.length}
+               你的得分：{score} / {mriQuiz.questions.length}
              </p>
              <p className="text-lg">
-               正确率：{((score / questions.length) * 100).toFixed(1)}%
+               正确率：{((score / mriQuiz.questions.length) * 100).toFixed(1)}%
              </p>
              <Button
```

---

我已经完成了代码重构，主要更改包括：

1. 创建了新的 `quizzes.ts` 文件，包含：
   - `Question` 接口定义
   - `Quiz` 接口定义
   - `mriQuiz` 常量，包含完整的测验数据

2. 更新了页面组件：
   - 移除了原有的问题和接口定义
   - 导入 `mriQuiz` 数据
   - 更新所有引用问题数据的地方，使用 `mriQuiz.questions`
   - 添加了测验标题和描述的显示

3. 改进了UI：
   - 添加了测验描述文本
   - 保持了所有原有功能

这样的重构带来以下好处：
1. 数据与视图分离，更容易维护
2. 可以轻松添加更多测验
3. 代码更加模块化和可重用
4. 更容易进行数据管理和更新

您是否需要：
1. 添加更多测验数据？
2. 修改测验的展示方式？
3. 添加测验分类或难度级别？
4. 其他改进建议？

---

_**User**_

添加更多测验数据

---

_**Assistant**_

我来帮您添加更多MRI相关的测验题目。我们将按照不同的主题来组织题目。



---

Cancelled

---



---



---

